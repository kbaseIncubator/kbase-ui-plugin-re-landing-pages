(window["webpackJsonpreact-app"]=window["webpackJsonpreact-app"]||[]).push([[0],{379:function(e){e.exports=JSON.parse('[[0,"Unspecified"],[1,"Standard"],[2,"Vertebrate Mitochondrial"],[3,"Yeast Mitochondrial"],[4,"Mold Mitochondrial; Protozoan Mitochondrial; Coelenterate Mitochondrial; Mycoplasma; Spiroplasma"],[5,"Invertebrate Mitochondrial"],[6,"Ciliate Nuclear; Dasycladacean Nuclear; Hexamita Nuclear"],[9,"Echinoderm Mitochondrial; Flatworm Mitochondrial"],[10,"Euplotid Nuclear"],[11,"Bacterial, Archaeal and Plant Plastid"],[12,"Alternative Yeast Nuclear"],[13,"Ascidian Mitochondrial"],[14,"Alternative Flatworm Mitochondrial"],[15,"Blepharisma Macronuclear"],[16,"Chlorophycean Mitochondrial"],[21,"Trematode Mitochondrial"],[22,"Scenedesmus obliquus mitochondrial"],[23,"Thraustochytrium mitochondrial code"],[24,"Pterobranchia Mitochondrial"],[25,"Candidate Division SR1 and Gracilibacteria"],[26,"Pachysolen tannophilus Nuclear"],[27,"Karyorelict Nuclear"],[28,"Condylostoma Nuclear"],[29,"Mesodinium Nuclear"],[30,"Peritrich Nuclear"],[31,"Blastocrithidia Nuclear"],[32,"Balanophoraceae Plastid"],[33,"Cephalodiscidae Mitochondrial"]]')},384:function(e,t,n){e.exports=n(801)},389:function(e,t,n){},771:function(e,t,n){},774:function(e,t,n){},775:function(e,t,n){},777:function(e,t,n){},786:function(e,t,n){},787:function(e,t,n){},794:function(e,t,n){},795:function(e,t,n){},796:function(e,t,n){},797:function(e,t,n){},798:function(e,t,n){},799:function(e,t,n){},800:function(e,t,n){},801:function(e,t,n){"use strict";n.r(t);var r,a,o,i=n(0),s=n.n(i),c=n(10),l=n.n(c),u=(n(389),n(13)),p=n(14),d=n(18),f=n(16),m=n(17),h=n(37),v=n(54),b=n(39),O=n(142),g=n(378),y=n(15),E=n.n(y),k=n(40),j=n(25);!function(e){e[e.NONE=0]="NONE",e[e.LOADED=1]="LOADED",e[e.ERROR=2]="ERROR"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.TAXONOMY=1]="TAXONOMY",e[e.ONTOLOGY=2]="ONTOLOGY"}(o||(o={}));var T=n(72),w=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getNodeInfo",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=/^(.*?)\/(.*)$/,r=/^([^/]+)\/([^/]+)(?:\/([^/]+))?$/,a=/^([^/]+)\/([^/]+)(?:\/([^/]+))?$/,e.abrupt("return",new Promise((function(e,o){var i=n.exec(t);if(i){var s=i,c=Object(k.a)(s,3),l=c[1],u=c[2];switch(l){case"taxonomy":!function(){if(i=r.exec(u)){4!==i.length&&o(new Error('Invalid relation engine id "'+t+'"'));var n,a=i,s=Object(k.a)(a,4),c=s[1],l=s[2],p=s[3];switch(n=p?parseInt(p,10):Date.now(),c){case"ncbi_taxonomy":return void e([{collection:"taxonomy",namespace:c,id:l,timestamp:n,created:Date.now(),expired:new Date(2055,5,5).getTime()}]);default:o(new Error('Unrecognized taxonomy namespace "'+c+'"'))}}else o(new Error("Taxonomy ref is "))}();break;case"ontology":if(!(i=a.exec(u)))return void o(new Error("Taxonomy ref is "));var p,d=i,f=Object(k.a)(d,4),m=f[1],h=f[2],v=f[3];switch(p=v?parseInt(v):Date.now(),m){case"go":return void e([{collection:"ontology",namespace:m,id:h,timestamp:p,created:Date.now(),expired:new Date(2055,5,5).getTime()}]);default:return void o(new Error('Ontology namespace not found "'+m+'"'))}default:o(new Error("Collection ".concat(l," does not resolve to a type")))}}else o(new Error("Invalid relation engine ID "+t))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),t}(T.DynamicServiceClient);w.module="relation_engine_api";var x,N,R,I,D,C,L,A,S,P=n(192);Object(P.a)(Error);function G(e){switch(e){case R.TAXONOMY:return"taxonomy";case R.ONTOLOGY:return"ontology"}}function _(e){switch(e){case I.NCBI:return"ncbi_taxonomy";case I.GTDB:return"gtdb"}}function U(e){switch(e){case"ncbi_taxonomy":return I.NCBI;case"gtdb":return I.GTDB;default:throw new Error('Unrecognized namespace "'+e+'"')}}function z(e){switch(e){case"go":return D.GO;default:throw new Error("Ontology namespace not supported: "+e)}}function M(e){return{type:S.NAVIGATE_SUCCESS,navigation:e}}function B(e){return function(){var t=Object(j.a)(E.a.mark((function t(n,r){var a,i,s,c,l,u,p;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:S.NAVIGATE_START}),a=r(),i=a.auth.userAuthorization,s=a.app.config.services.ServiceWizard.url,i){t.next=4;break}return t.abrupt("return");case 4:return c=new w({url:s,token:i.token}),t.prev=5,t.next=8,c.getNodeInfo(e);case 8:l=t.sent,u=Object(k.a)(l,1),p=u[0],t.t0=p.collection,t.next="taxonomy"===t.t0?14:"ontology"===t.t0?16:18;break;case 14:return n(M({type:o.TAXONOMY,ref:{collection:R.TAXONOMY,namespace:U(p.namespace),id:p.id,timestamp:p.timestamp}})),t.abrupt("break",18);case 16:return n(M({type:o.ONTOLOGY,ref:{collection:R.ONTOLOGY,namespace:z(p.namespace),id:p.id,timestamp:p.timestamp}})),t.abrupt("break",18);case 18:t.next=24;break;case 20:t.prev=20,t.t1=t.catch(5),console.error("ERROR",t.t1),n((d=t.t1.message,{type:S.NAVIGATE_ERROR,message:d}));case 24:case"end":return t.stop()}var d}),t,null,[[5,20]])})));return function(e,n){return t.apply(this,arguments)}}()}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{navigation:t.navigation,trigger:Date.now()})}!function(e){e[e.TAXONOMY=0]="TAXONOMY",e[e.ONTOLOGY=1]="ONTOLOGY"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(N||(N={})),function(e){e[e.TAXONOMY=0]="TAXONOMY",e[e.ONTOLOGY=1]="ONTOLOGY"}(R||(R={})),function(e){e[e.NCBI=0]="NCBI",e[e.GTDB=1]="GTDB"}(I||(I={})),function(e){e[e.GO=0]="GO"}(D||(D={})),function(e){e[e.GO=0]="GO"}(C||(C={})),function(e){e.IS_A="OntologyRelation$is_a",e.PART_OF="OntologyRelation$part_of",e.HAS_PART="OntologyRelation$has_part",e.REGULATES="OntologyRelation$regulates",e.POSITIVELY_REGULATES="OntologyRelation$positivelyRegulates",e.NEGATIVELY_REGULATES="OntologyRelation$negativelyRegulates",e.OCCURS_IN="OntologyRelation$occursIn",e.ENDS_DURING="OntologyRelation$endsDuring",e.HAPPENS_DURING="OntologyRelation$happensDuring"}(L||(L={})),function(e){e[e.EXACT=0]="EXACT",e[e.NARROW=1]="NARROW",e[e.BROAD=2]="BROAD",e[e.RELATED=3]="RELATED"}(A||(A={})),function(e){e.NAVIGATE="kbase-ui-plugin-landing-pages/navigate",e.NAVIGATE_START="kbase-ui-plugin-landing-pages/navigate/start",e.NAVIGATE_SUCCESS="kbase-ui-plugin-landing-pages/navigate/success",e.NAVIGATE_ERROR="kbase-ui-plugin-landing-pages/navigate/error"}(S||(S={}));var F,V,X=function(e,t){var n=Object(b.baseReducer)(e,t);if(n)return n;if(!e)return e;switch(t.type){case S.NAVIGATE_SUCCESS:return Y(e,t)}return e};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(b.makeBaseStoreState)(),{navigation:{type:o.NONE},trigger:0,view:{status:a.NONE}})}!function(e){e[e.TAXON=0]="TAXON",e[e.ONTOLOGY_TERM=1]="ONTOLOGY_TERM"}(F||(F={})),function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(V||(V={}));n(771),n(95);var K,q=n(8);!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.RELOADING=3]="RELOADING",e[e.ERROR=4]="ERROR"}(K||(K={}));var J=function(){function e(t){Object(u.a)(this,e),this.db=void 0,this.stopped=void 0,this.onUpdate=void 0,this.onUpdate=t.onUpdate,this.db={data:t.initialData},this.stopped=!1}return Object(p.a)(e,[{key:"forceComponentUpdate",value:function(){this.stopped||this.onUpdate()}},{key:"set",value:function(e){this.db.data=e(this.db.data),this.forceComponentUpdate()}},{key:"get",value:function(){return this.db.data}},{key:"stop",value:function(){this.stopped=!0}}]),e}(),Q=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getLineage",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o={ns:n,id:r,ts:a},e.next=4,this.callFunc("get_lineage",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildren",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c,l,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o=t.offset,i=t.limit,s=t.searchTerm,e.next=3,this.callFunc("get_children",[{ns:n,id:r,ts:a,offset:o,limit:i,search_text:s}]);case 3:return c=e.sent,l=Object(k.a)(c,1),u=l[0],e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaxon",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o={ns:n,id:r,ts:a},e.next=4,this.callFunc("get_taxon",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssociatedWorkspaceObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c,l,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.taxon_ns,r=t.taxon_id,a=t.ts,o=t.offset,i=t.limit,s={taxon_ns:n,taxon_id:r,ts:a,limit:i,offset:o},e.next=4,this.callFunc("get_associated_ws_objects",[s]);case 4:return c=e.sent,l=Object(k.a)(c,1),u=l[0],e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(T.DynamicServiceClient);Q.module="taxonomy_re_api";var Z=function(){function e(t){var n=t.token,r=t.url;Object(u.a)(this,e),this.taxonomyClient=void 0,this.taxonomyClient=new Q({token:n,url:r})}return Object(p.a)(e,[{key:"getLineage",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.namespace,r=t.id,a=t.timestamp,e.next=3,this.taxonomyClient.getLineage({ns:_(n),id:r,ts:a});case 3:return o=e.sent,i=o.results.map((function(e){var t;return t="root"!==e.scientific_name&&"cellular organisms"!==e.scientific_name,{ref:{collection:R.TAXONOMY,namespace:I.NCBI,id:e.id,timestamp:o.ts},name:e.scientific_name,rank:e.rank,ncbiID:e.NCBI_taxon_id,geneticCode:parseInt(e.gencode),aliases:e.aliases.map((function(e){return{name:e.name,category:e.category}})),isBiological:t}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildren",value:function(){var e=Object(j.a)(E.a.mark((function e(t,n){var r,a,o,i,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.namespace,a=t.id,o=t.timestamp,e.next=3,this.taxonomyClient.getChildren({ns:_(r),id:a,ts:o,offset:n.offset,limit:n.limit,searchTerm:n.searchTerm});case 3:return i=e.sent,s=i.results.map((function(e){var t;return t="root"!==e.scientific_name&&"cellular organisms"!==e.scientific_name,{ref:{collection:R.TAXONOMY,namespace:I.NCBI,id:e.id,timestamp:i.ts},name:e.scientific_name,rank:e.rank,ncbiID:e.NCBI_taxon_id,geneticCode:parseInt(e.gencode),aliases:e.aliases.map((function(e){return{name:e.name,category:e.category}})),isBiological:t}})),e.abrupt("return",[s,i.total_count]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTaxon",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.namespace,r=t.id,a=t.timestamp,e.next=3,this.taxonomyClient.getTaxon({ns:_(n),id:r,ts:a});case 3:return o=e.sent,i=o.results[0],s="root"!==i.scientific_name&&"cellular organisms"!==i.scientific_name,c={ref:{collection:R.TAXONOMY,namespace:I.NCBI,id:i.id,timestamp:o.ts},name:i.scientific_name,rank:i.rank,ncbiID:i.NCBI_taxon_id,geneticCode:parseInt(i.gencode),aliases:i.aliases.map((function(e){return{name:e.name,category:e.category}})),isBiological:s},e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLinkedObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t,n){var r,a,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={taxon_ns:_(t.namespace),taxon_id:t.id,ts:t.timestamp,offset:n.offset,limit:n.limit},e.next=3,this.taxonomyClient.getAssociatedWorkspaceObjects(r);case 3:return a=e.sent,o=a.results.map((function(e){return{linkedAt:e.edge.updated_at,objectID:e.ws_obj.object_id,workspaceID:e.ws_obj.workspace_id,version:e.ws_obj.version,objectName:e.ws_obj.name,createdAt:e.ws_obj.epoch,workspaceUpdatedAt:e.ws_obj.updated_at,type:{module:e.ws_obj.type.module_name,name:e.ws_obj.type.type_name,majorVersion:e.ws_obj.type.maj_ver,minorVersion:e.ws_obj.type.min_ver}}})),e.abrupt("return",{linkedObjects:o,totalCount:a.total_count});case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props=void 0,n.props=e,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getTargetTaxon",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.set((function(e){return te({},e,{status:K.LOADING})})),n=new Z({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.next=5,n.getTaxon(t);case 5:r=e.sent,this.set((function(e){return te({},e,{status:K.LOADED,targetTaxon:r,selectedTaxon:r})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("ERROR",e.t0),this.set((function(t){return{status:K.ERROR,error:{code:"not-found",source:"TaxonDB.getTargetTaxon",message:e.t0.message}}}));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSelectedTaxon",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Z({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.next=4,n.getTaxon(t);case 4:r=e.sent,this.set((function(e){return te({},e,{selectedTaxon:r})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("ERROR",e.t0),this.set((function(t){return{status:K.ERROR,error:{code:"not-found",source:"TaxonDB.getSelectedTaxon",message:e.t0.message}}}));case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),re=(n(350),n(76)),ae=(n(352),n(51)),oe=(n(774),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Row"},s.a.createElement("div",{className:"Col-auto"},s.a.createElement("img",{src:"images/ncbi-logo.jpg",style:{height:"64px"},alt:"NCBI Logo"})),s.a.createElement("div",{className:"Col"},s.a.createElement("div",{className:"InfoTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Source"),s.a.createElement("div",{className:"InfoTable-dataCol"},s.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/guide/taxonomy/",target:"_blank",rel:"noopener noreferrer"},"NCBI"))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Version"),s.a.createElement("div",{className:"InfoTable-dataCol"},"SOME VERSION")))))}}]),t}(s.a.Component)),ie=(n(775),n(249),n(42)),se=(n(777),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={hovering:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"clickTaxon",value:function(){this.props.selectTaxonRef(this.props.taxon.ref)}},{key:"clickNavigateToTaxon",value:function(){var e=["review",G(this.props.taxon.ref.collection),_(this.props.taxon.ref.namespace),this.props.taxon.ref.id,String(this.props.taxon.ref.timestamp)].join("/");window.parent?window.parent.location.hash=e:window.location.hash=e}},{key:"onMouseEnter",value:function(e){this.setState({hovering:!0})}},{key:"onMouseLeave",value:function(e){this.setState({hovering:!1})}},{key:"renderOver",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"TaxonItem-name",onClick:this.clickNavigateToTaxon.bind(this)},this.props.taxon.name),s.a.createElement("div",{className:"TaxonItem-inspector",onClick:this.clickTaxon.bind(this)},s.a.createElement(q.a,{type:"arrow-right"})))}},{key:"renderActive",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"TaxonItem-name",onClick:this.clickNavigateToTaxon.bind(this)},this.props.taxon.name),s.a.createElement("div",{className:"TaxonItem-inspector"},s.a.createElement(q.a,{type:"arrow-right"})))}},{key:"renderNormal",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"TaxonItem-name"},this.props.taxon.name))}},{key:"renderItem",value:function(){return this.props.isActive?this.renderActive():this.state.hovering?this.renderOver():this.renderNormal()}},{key:"render",value:function(){var e=this.props.taxon,t=["TaxonItem"];this.props.isActive&&t.push("TaxonItem-active");var n=s.a.createElement("div",null,s.a.createElement("div",{style:{borderBottom:"1px solid silver"}},e.name),s.a.createElement("div",null,e.rank));return s.a.createElement(ie.a,{title:n,placement:"right"},s.a.createElement("div",{className:t.join(" "),key:this.props.taxon.ref.id,onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this)},this.renderItem()))}}]),t}(s.a.Component)),ce=(n(155),n(65));function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).token=void 0,n.serviceWizardURL=void 0,n.token=e.token,n.serviceWizardURL=e.config.services.ServiceWizard.url,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"fetchChildren",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c,l,u,p,d;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.taxonRef,r=t.page,a=t.pageSize,o=t.searchTerm,e.prev=1,this.set((function(e){return e.status===K.LOADED?ue({},e,{status:K.RELOADING}):ue({},e,{status:K.LOADING})})),i=new Z({token:this.token,url:this.serviceWizardURL}),s=(r-1)*a,c=a,e.next=8,i.getChildren(n,{offset:s,limit:c,searchTerm:o});case 8:l=e.sent,u=Object(k.a)(l,2),p=u[0],d=u[1],this.set((function(e){return ue({},e,{status:K.LOADED,taxa:p,total:d,page:r,pageSize:a})})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("ERROR",e.t0),this.set((function(t){return{status:K.ERROR,error:{code:"not-found",source:"TaxonChildrenDB.fetchChildren",message:e.t0.message}}}));case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),de=(n(354),n(77)),fe=(n(782),n(87)),me=(n(182),n(61)),he=(n(181),n(68)),ve=(n(786),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"selectTaxon",value:function(e){this.props.selectTaxonRef(e)}},{key:"navigateToTaxon",value:function(e){this.props.navigateToTaxonRef(e)}},{key:"renderItemsPlain",value:function(){var e=this;return this.props.taxa.map((function(t,n){var r=null!==e.props.selectedTaxonRef&&e.props.selectedTaxonRef.id===t.ref.id;return s.a.createElement(se,{taxon:t,isActive:r,selectTaxonRef:e.selectTaxon.bind(e),key:String(n),navigateToTaxonRef:e.navigateToTaxon.bind(e)})}))}},{key:"renderNoItems",value:function(){return s.a.createElement(he.a,{description:"No Children",image:he.a.PRESENTED_IMAGE_SIMPLE})}},{key:"render",value:function(){return 0===this.props.taxa.length?this.renderNoItems():this.renderItemsPlain()}}]),t}(s.a.Component)),be=(n(787),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderMessage",value:function(){return s.a.createElement("span",null,s.a.createElement(q.a,{type:"exclamation-circle",style:{color:"red"}})," ",this.props.error.message)}},{key:"render",value:function(){return s.a.createElement(ce.a,{type:"error",message:this.renderMessage()})}}]),t}(s.a.Component)),Oe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).searchTerm=void 0,n.page=void 0,n.pageSize=void 0,n.searchTerm="",n.page=1,n.pageSize=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchChildren(this.props.taxonRef,1,10,"")}},{key:"renderTaxaNone",value:function(){return s.a.createElement("div",null,"None")}},{key:"renderTaxaLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderTitleLoaded",value:function(e){if(0===e.total)return s.a.createElement("div",{className:"Col-auto TaxonChildren-box-title"},"No Children");var t=Intl.NumberFormat("en-US",{useGrouping:!0}).format(e.total),n=(e.page-1)*e.pageSize+1,r=n+e.taxa.length-1;return s.a.createElement("div",{className:"Col-auto TaxonChildren-box-title"},"Children (",n,"-",r," of ",t,")")}},{key:"renderTitleReLoading",value:function(e){return s.a.createElement(me.a,{size:"small"},this.renderTitleLoaded(e))}},{key:"renderTitle",value:function(){var e=this.props.db;switch(e.status){case K.NONE:case K.LOADING:return s.a.createElement("div",null,"Loading...");case K.ERROR:return s.a.createElement(be,{error:e.error});case K.LOADED:return this.renderTitleLoaded(e);case K.RELOADING:return this.renderTitleReLoading(e)}}},{key:"doSearch",value:function(e){this.searchTerm=e,this.props.fetchChildren(this.props.taxonRef,1,this.pageSize||10,e)}},{key:"renderSearch",value:function(){var e=this.props.db.status!==K.LOADED||this.props.db.total<=this.props.db.pageSize&&!this.searchTerm;return s.a.createElement("div",{style:{marginBottom:"4px"}},s.a.createElement(fe.a.Search,{placeholder:"Search Children",onSearch:this.doSearch.bind(this),disabled:e}))}},{key:"renderTaxaLoaded",value:function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(ve,{taxa:e.taxa,selectedTaxonRef:this.props.selectedTaxonRef,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef,totalItems:e.total,maxItems:10}))}},{key:"renderTaxaReLoading",value:function(e){return s.a.createElement(me.a,{tip:"Loading"},this.renderTaxaLoaded(e))}},{key:"renderTaxaError",value:function(e){return s.a.createElement(be,{error:e.error})}},{key:"renderTaxa",value:function(){switch(this.props.db.status){case K.NONE:return this.renderTaxaNone();case K.LOADING:return this.renderTaxaLoading();case K.LOADED:return this.renderTaxaLoaded(this.props.db);case K.RELOADING:return this.renderTaxaReLoading(this.props.db);case K.ERROR:return this.renderTaxaError(this.props.db)}}},{key:"changePage",value:function(e,t){this.page=e,this.pageSize=t||10,this.props.fetchChildren(this.props.taxonRef,this.page,this.pageSize,this.searchTerm)}},{key:"renderPaginationNone",value:function(){return s.a.createElement(de.a,{size:"small",showLessItems:!0,hideOnSinglePage:!1})}},{key:"renderPaginationLoading",value:function(){return s.a.createElement(de.a,{size:"small",showLessItems:!0,hideOnSinglePage:!1})}},{key:"renderPaginationError",value:function(){return s.a.createElement(de.a,{size:"small",showLessItems:!0,hideOnSinglePage:!1})}},{key:"renderPaginationLoaded",value:function(e){return s.a.createElement(de.a,{size:"small",defaultPageSize:e.pageSize,showLessItems:!0,current:e.page,hideOnSinglePage:!1,total:e.total,onChange:this.changePage.bind(this)})}},{key:"renderPaginationReLoading",value:function(e){return s.a.createElement(de.a,{size:"small",defaultPageSize:e.pageSize,showLessItems:!0,current:e.page,hideOnSinglePage:!1,total:e.total,disabled:!0})}},{key:"renderPagination",value:function(){var e=this.props.db;switch(e.status){case K.NONE:return this.renderPaginationNone();case K.LOADING:return this.renderPaginationLoading();case K.ERROR:return this.renderPaginationError();case K.LOADED:return this.renderPaginationLoaded(e);case K.RELOADING:return this.renderPaginationReLoading(e)}}},{key:"renderChildren",value:function(){return s.a.createElement("div",null,this.renderTitle(),this.renderSearch(),this.renderPagination(),this.renderTaxa())}},{key:"render",value:function(){return this.renderChildren()}}]),t}(s.a.Component),ge=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.db=new pe({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"fetchChildren",value:function(e,t,n,r){return this.db.fetchChildren({taxonRef:e,page:t,pageSize:n,searchTerm:r})}},{key:"renderSuccess",value:function(e){return s.a.createElement(Oe,{db:e,taxonRef:this.props.taxonRef,selectedTaxonRef:this.props.selectedTaxonRef,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef,fetchChildren:this.fetchChildren.bind(this)})}},{key:"renderError",value:function(e){return s.a.createElement(ce.a,{type:"error",message:e.error.message})}},{key:"renderTest",value:function(){return"test"}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.ERROR:return this.renderError(e);default:return this.renderSuccess(e)}}}]),t}(s.a.Component);var ye=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(){return{}}))(ge);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props=void 0,n.props=e,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getLineage",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.set((function(e){return ke({},e,{status:K.LOADING})})),n=new Z({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.next=5,n.getLineage(t);case 5:r=e.sent,this.set((function(e){return ke({},e,{status:K.LOADED,lineage:r})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("ERROR",e.t0),this.set((function(t){return{status:K.ERROR,error:{code:"not-found",source:"LineageDB.getLineage",message:e.t0.message}}}));case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),Te=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(ve,{taxa:this.props.lineage,selectedTaxonRef:this.props.selectedTaxonRef,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef,totalItems:this.props.lineage.length,maxItems:10})}}]),t}(s.a.Component),we=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.db=new je({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){switch(this.db.get().status){case K.NONE:this.db.getLineage(this.props.taxonRef)}}},{key:"componentWillUnmount",value:function(){}},{key:"renderLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderError",value:function(e){return s.a.createElement(be,{error:e.error})}},{key:"renderLoaded",value:function(e){return s.a.createElement(Te,{lineage:e.lineage,selectedTaxonRef:this.props.selectedTaxonRef,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef})}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.NONE:case K.LOADING:return this.renderLoading();case K.ERROR:return this.renderError(e);case K.LOADED:return this.renderLoaded(e)}}}]),t}(s.a.Component);var xe=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(){return{}}))(we),Ne=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"onClick",value:function(e){this.props.selectTaxonRef(e)}},{key:"clickTaxon",value:function(e){this.props.selectTaxonRef(e.ref)}},{key:"renderLineage",value:function(){return s.a.createElement(xe,{taxonRef:this.props.targetTaxon.ref,selectedTaxonRef:this.props.selectedTaxon.ref,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef})}},{key:"renderChildrenCount",value:function(e){return 0===e?s.a.createElement("div",{className:""},"No children"):1===e?s.a.createElement("div",null,"One child"):s.a.createElement("div",null,Intl.NumberFormat("en-US",{useGrouping:!0}).format(e)," ","children")}},{key:"renderChildren",value:function(){var e;return e=this.props.selectedTaxon?this.props.selectedTaxon.ref:null,s.a.createElement(ye,{taxonRef:this.props.targetTaxon.ref,selectedTaxonRef:e,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef})}},{key:"renderTargetTaxon",value:function(){var e=this.props.selectedTaxon&&this.props.selectedTaxon.ref.id===this.props.targetTaxon.ref.id&&this.props.selectedTaxon.ref.timestamp===this.props.targetTaxon.ref.timestamp;return s.a.createElement(se,{taxon:this.props.targetTaxon,isActive:e,selectTaxonRef:this.props.selectTaxonRef,navigateToTaxonRef:this.props.navigateToTaxonRef})}},{key:"render",value:function(){return s.a.createElement("div",{className:"Col scrollable",style:{overflowY:"auto"}},s.a.createElement("div",{className:"Col-auto Nav-box"},s.a.createElement("div",{className:"Nav-box-title"},"Lineage"),this.renderLineage()),s.a.createElement("div",{className:"Col-auto Nav-box Lineage-target-taxon"},this.renderTargetTaxon()),s.a.createElement("div",{className:"Col-auto scrollable Nav-box"},this.renderChildren()))}}]),t}(s.a.Component),Re=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e={};return"species"===this.props.taxon.rank&&(e={fontStyle:"italic"}),s.a.createElement("div",{className:"InfoTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Name"),s.a.createElement("div",{className:"InfoTable-dataCol",style:e},this.props.taxon.name)),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Rank"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.taxon.rank)))}}]),t}(s.a.Component),Ie=(n(788),n(90)),De=(n(183),n(62));var Ce=function(e){if(!(e instanceof Array))throw new Error("Invalid genetic codes file!");return e.map((function(e){var t=Object(k.a)(e,2),n=t[0],r=t[1];if("number"!==typeof n)throw new Error("Invalid genetic code id in file");if("string"!==typeof r)throw new Error("Invalid genetic code label in file");return[n,r]}))}(n(379)).reduce((function(e,t){var n=Object(k.a)(t,2),r=n[0],a=n[1];return e.set(r,a),e}),new Map),Le=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderAliases",value:function(){var e=function(e,t){var n=e.replace(/^["']/,""),r=t.replace(/^["']/,"");return n.localeCompare(r)};return s.a.createElement(De.a,{dataSource:this.props.taxon.aliases,className:"KBaseAntdOverride-remove-table-border",size:"small",pagination:!1,scroll:{y:"25em"},rowKey:"name",bordered:!1},s.a.createElement(De.a.Column,{title:"Name",dataIndex:"name",key:"name",defaultSortOrder:"ascend",sorter:function(t,n){return e(t.name,n.name)}}),s.a.createElement(De.a.Column,{title:"Category",dataIndex:"category",key:"category",width:"20em",sorter:function(t,n){return e(t.category,n.category)}}))}},{key:"renderTaxonDetail",value:function(){var e={};return"species"===this.props.taxon.rank&&(e.fontStyle="italic"),s.a.createElement("div",{className:"InfoTable"},s.a.createElement("div",{className:"InfoTable-row",key:"name"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"8em"}},"Name"),s.a.createElement("div",{className:"InfoTable-dataCol",style:e},this.props.taxon.name)),s.a.createElement("div",{className:"InfoTable-row",key:"rank"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"8em"}},"Rank"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.taxon.rank)),s.a.createElement("div",{className:"InfoTable-row",key:"ncbiid"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"8em"}},"NCBI ID"),s.a.createElement("div",{className:"InfoTable-dataCol"},s.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=info&id=".concat(this.props.taxon.ncbiID),target:"_blank",rel:"noopener noreferrer"},this.props.taxon.ncbiID))),s.a.createElement("div",{className:"InfoTable-row",key:"genetic-code"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"8em"}},"Genetic Code"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.taxon.geneticCode," -"," ",Ce.get(this.props.taxon.geneticCode)||"Unknown")),s.a.createElement("div",{className:"InfoTable-row",key:"aliases"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"8em"}},"Aliases"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderAliases())))}},{key:"render",value:function(){return s.a.createElement("div",null,this.renderTaxonDetail())}}]),t}(s.a.Component),Ae=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.taxon;switch(e.ref.namespace){case I.NCBI:return s.a.createElement(Le,{taxon:e});default:return s.a.createElement(ce.a,{type:"error",message:"This taxon type is not supported"})}}}]),t}(s.a.Component);function Se(e,t,n){if("string"===typeof t)t=t.split(".");else if(!(t instanceof Array))throw new TypeError("Invalid type for key: "+typeof t);for(var r=e,a=0;a<t.length;a+=1){if(void 0===r||"object"!==typeof r||null===r)return n;r=r[t[a]]}return void 0===r?n:r}var Pe,Ge=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).name="NotFound",n}return Object(m.a)(t,e),t}(Object(P.a)(Error)),_e="https://en.wikipedia.org/w/api.php",Ue=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,[{key:"scrubTerm",value:function(e){var t=e.split(""),n=/[\w \s]/;return t.filter((function(e){return!!n.exec(e)})).join("")}},{key:"findTerm",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Empty term passed");case 2:return n=this.scrubTerm(t),e.abrupt("return",this.getWikipediaInfo(n).then((function(e){var t=e.imageUrl,n=e.pageUrl,r=e.introText,a=e.title,o=e.pageId,i=e.matchingTerms,s=e.exactMatch;return{imageUrl:t,pageUrl:n,introText:r.replace(/====/g,"####").replace(/===/g,"###").replace(/==/g,"##").replace(/\n/g,"  \n"),title:a,pageId:o,matchingTerms:i,exactMatch:s}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWikipediaInfo",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getPage(t).then((function(e){var t=e.wikiResponse,r=e.matchingTerms,a=e.exactMatch;return Promise.all([n.getImage({size:500,pageId:t.parse.pageid}),n.getPageInfo({pageId:t.parse.pageid})]).then((function(e){var n=Object(k.a)(e,2),o=n[0],i=n[1];return{imageUrl:o,pageUrl:i.url,introText:i.introText,title:t.parse.title,pageId:t.parse.pageid,matchingTerms:r,exactMatch:a}}))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPage",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split(/\s+/),r=!0,e.abrupt("return",new Promise((function(e,a){!function n(o){0===o.length&&a(new Ge('No Wikipedia page found matching "'+t+'"'));var i=new URL(_e),s=i.searchParams;s.set("action","parse"),s.set("format","json"),s.set("prop","text|headhtml"),s.set("section","0"),s.set("redirects",""),s.set("page",o.join(" "));s.set("origin","*"),fetch(i.toString(),{method:"GET",headers:{accept:"application/json"}}).then((function(t){switch(t.status){case 200:try{return t.json().then((function(t){if(t.error){if("missingtitle"===t.error.code)return o.pop(),r=!1,n(o),null;console.error("wikipedia api error",t),a(new Error("Wikipedia api error: "+t.error.code))}else e({wikiResponse:t,matchingTerms:o,exactMatch:r})}))}catch(s){a(new Error("Error parsing wikipedia response: "+s.message))}break;default:var i="Unexpected response from wikipedia api: "+t.status;console.error(i,t),a(new Error(i))}})).catch((function(e){a(e)}))}(n)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPageInfo",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageId,r=new URL(_e),(a=r.searchParams).set("action","query"),a.set("pageids",n),a.set("prop","info|extracts"),a.set("explaintext","true"),a.set("inprop","url"),a.set("origin","*"),a.set("format","json"),e.abrupt("return",fetch(r.toString(),{method:"GET"}).then((function(e){switch(e.status){case 200:try{return e.json().then((function(e){return{url:Se(e,["query","pages",String(n),"fullurl"],null),introText:Se(e,["query","pages",String(n),"extract"],null)}}))}catch(r){throw console.error("error getting page info",r.message),r}default:var t="Unexpected response from wikipedia api: "+e.status;throw console.error(t,e),new Error(t)}})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.size,r=t.pageId,a=new URL(_e),(o=a.searchParams).set("action","query"),o.set("format","json"),o.set("prop","pageimages"),o.set("pithumbsize",String(n)),o.set("pageids",String(r)),o.set("origin","*"),i={accept:"application/json"},e.abrupt("return",fetch(a.toString(),{method:"GET",headers:i}).then((function(e){switch(e.status){case 200:try{return e.json().then((function(e){return Se(e,["query","pages",String(r),"thumbnail","source"],null)}))}catch(n){throw new Error("Error parsing wikipedia response: "+n.message)}default:var t="Unexpected response from wikipedia api: "+e.status;throw console.error(t,e),new Error(t)}})).catch((function(e){var t="Error getting image from wikipedia: "+e.message;throw console.error(t,e),new Error("Error getting image from wikipedia: "+e.message)})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ze=n(380),Me=n.n(ze),Be=(n(794),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Loading-box"},s.a.createElement(me.a,{size:"large"}),s.a.createElement("br",null),this.props.message)}}]),t}(s.a.Component));n(795);!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(Pe||(Pe={}));var We,Ye=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).wikipediaClient=void 0,n.canceled=void 0,n.wikipediaClient=new Ue,n.canceled=!1,n.state={state:Pe.NONE},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this.canceled=!0}},{key:"renderArticle",value:function(e){var t=Me()(e.introText);return s.a.createElement("div",{style:{overflow:"auto"},dangerouslySetInnerHTML:{__html:t}})}},{key:"renderImage",value:function(e){return e.imageUrl?s.a.createElement("div",null,s.a.createElement("img",{src:e.imageUrl,style:{width:"100%"},alt:"".concat(this.props.term)})):s.a.createElement("div",{className:"Wikipedia-empty-image"},s.a.createElement("div",{className:"-content"},"Image not found"))}},{key:"renderMatch",value:function(e){if(e.exactMatch){var t=s.a.createElement(s.a.Fragment,null,s.a.createElement(q.a,{type:"check",style:{color:"green"}}),' Exact match on "',e.matchingTerms.join(" "),'"');return s.a.createElement(ce.a,{type:"success",message:t})}var n=s.a.createElement(s.a.Fragment,null,s.a.createElement(q.a,{type:"warning",style:{color:"orange"}}),' Inexact match on: "',e.matchingTerms.join(" "),'"');return s.a.createElement(ce.a,{type:"warning",message:n})}},{key:"renderWikipediaLogoCredit",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{borderBottom:"1px solid gray"}},"Link to the original Wikipedia entry"),s.a.createElement("div",{style:{fontSize:"80%"}},s.a.createElement("p",{style:{textAlign:"center"}},"credit:",s.a.createElement("a",{href:"https://creativecommons.org/licenses/by-sa/3.0/",title:"Creative Commons Attribution-ShareAlike 3.0",target:"_blank",rel:"noopener noreferrer"},"CC BY-SA 3.0"),s.a.createElement("a",{href:"https://en.wikipedia.org/w/index.php?curid=33285413",target:"_blank",rel:"noopener noreferrer"},"Link"))))}},{key:"renderWikipediaInfo",value:function(e){return s.a.createElement("div",{className:"Row scrollable"},s.a.createElement("div",{className:"Col Col-grow-2 scrollable"},s.a.createElement("div",{style:{display:"flex",flexDirection:"row",marginBottom:"10px"}},s.a.createElement("div",{style:{flex:"1 1 0px"}},this.renderMatch(e)),s.a.createElement("div",{style:{flex:"0 0 auto",alignSelf:"center",marginLeft:"10px"}},s.a.createElement("div",{style:{height:"32px",textAlign:"center"}},s.a.createElement(ie.a,{title:this.renderWikipediaLogoCredit()},s.a.createElement("a",{href:e.pageUrl,target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{src:"images/wikipedia-logo.svg",style:{height:"100%"},alt:"Wikipedia Logo"})))),s.a.createElement("div",null))),s.a.createElement("div",{className:"scrollable",style:{flex:"2 1 0px",paddingRight:"4px",marginRight:"4px",overflowY:"auto"}},this.renderArticle(e))),s.a.createElement("div",{className:"Col Col-grow-1",style:{flex:"1 1 0px",marginLeft:"10px"}},this.renderImage(e)))}},{key:"updateInfo",value:function(){var e=this,t=new Ue,n=this.props.term;this.setState({state:Pe.LOADING}),t.findTerm(n).then((function(t){e.canceled||e.setState({state:Pe.LOADED,wikipediaInfo:t})})).catch((function(t){if(!e.canceled)return e.setState({state:Pe.ERROR,error:t.message})}))}},{key:"componentDidMount",value:function(){this.updateInfo()}},{key:"componentDidUpdate",value:function(e,t){e.term!==this.props.term&&this.updateInfo()}},{key:"renderNone",value:function(){return s.a.createElement("div",null)}},{key:"renderLoading",value:function(){return s.a.createElement(Be,{message:"Searching Wikipedia..."})}},{key:"renderLoaded",value:function(e){return this.renderWikipediaInfo(e.wikipediaInfo)}},{key:"renderError",value:function(e){return s.a.createElement(ce.a,{type:"error",message:e.error})}},{key:"render",value:function(){if(!this.canceled)switch(this.state.state){case Pe.NONE:return this.renderNone();case Pe.LOADING:return this.renderLoading();case Pe.LOADED:return this.renderLoaded(this.state);case Pe.ERROR:return this.renderError(this.state)}}}]),t}(s.a.Component),Fe=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderTaxonDescription",value:function(){return s.a.createElement(Ye,{term:this.props.taxon.name})}},{key:"notBiological",value:function(){switch(this.props.taxon.name){case"root":return s.a.createElement("div",null,s.a.createElement("p",null,"This taxon is the topmost node in the NCBI Taxonomy tree."));case"cellular organisms":return s.a.createElement("div",null,s.a.createElement("p",null,"This taxon represents all cellular organisms."));default:return s.a.createElement("div",null,s.a.createElement("p",null,"Unknown non-biological taxon."))}}},{key:"render",value:function(){return this.props.taxon.isBiological?s.a.createElement("div",{className:"Col scrollable"},this.renderTaxonDescription()):this.notBiological()}}]),t}(s.a.Component);!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR",e[e.RELOADING=4]="RELOADING"}(We||(We={}));var Ve,Xe=function(){function e(t){Object(u.a)(this,e),this.db=void 0,this.stopped=void 0,this.onUpdate=void 0,this.onUpdate=t.onUpdate,this.db={data:t.initialData},this.stopped=!1}return Object(p.a)(e,[{key:"forceComponentUpdate",value:function(){this.stopped||this.onUpdate()}},{key:"set",value:function(e){this.db.data=e(this.db.data),this.forceComponentUpdate()}},{key:"get",value:function(){return this.db.data}},{key:"stop",value:function(){this.stopped=!0}}]),e}(),$e=n(92),He=n.n($e);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.ASCENDING=0]="ASCENDING",e[e.DESCENDING=1]="DESCENDING"}(Ve||(Ve={}));var Je=function(){function e(t){Object(u.a)(this,e),this.taskFun=void 0,this.hasResult=void 0,this.result=void 0,this.canceled=void 0,this.taskFun=t,this.result=null,this.hasResult=!1,this.canceled=!1}return Object(p.a)(e,[{key:"run",value:function(){var e=Object(j.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.taskFun();case 3:return this.result=e.sent,e.abrupt("return",this.result);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){this.canceled=!0}},{key:"get",value:function(){if(null===this.result)throw new Error("Attempt to fetch value when not set");return this.result}},{key:"isCanceled",value:function(){return this.canceled}}]),e}(),Qe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).token=void 0,n.serviceWizardURL=void 0,n.currentTask=void 0,n.token=e.token,n.serviceWizardURL=e.config.services.ServiceWizard.url,n.currentTask=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"fetchLinkedObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.taxonRef,r=t.page,a=t.pageSize,this.currentTask&&this.currentTask.cancel(),o=function(){var e=Object(j.a)(E.a.mark((function e(){var t,o,i,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Z({token:c.token,url:c.serviceWizardURL}),o=(r-1)*a,i=a,e.next=5,t.getLinkedObjects(n,{offset:o,limit:i});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.set((function(e){switch(e.linkedObjectsCollection.status){case We.LOADING:case We.LOADED:case We.RELOADING:return qe({},e,{linkedObjectsCollection:qe({},e.linkedObjectsCollection,{status:We.LOADING})});case We.NONE:case We.ERROR:default:return qe({},e,{linkedObjectsCollection:{status:We.LOADING,data:{linkedObjects:[],page:r,pageSize:a,totalCount:0}}})}})),i=new Je(o),this.currentTask=i,e.prev=6,e.next=9,i.run();case 9:if(s=e.sent,!i.isCanceled()){e.next=12;break}return e.abrupt("return");case 12:this.set((function(e){return qe({},e,{linkedObjectsCollection:{status:We.LOADED,data:qe({},s,{page:r,pageSize:a})}})})),this.currentTask=null,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),console.error("ERROR",e.t0),this.set((function(t){return qe({},t,{linkedObjectsCollection:{status:We.ERROR,error:{code:"not-found",message:e.t0.message,source:"LinkedDataDB.fetchLinkedObjects"}}})}));case 20:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryLinkedObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c=this;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.taxonRef,r=t.page,a=t.pageSize,t.sort,this.currentTask&&this.currentTask.cancel(),o=function(){var e=Object(j.a)(E.a.mark((function e(){var t,o,i,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Z({token:c.token,url:c.serviceWizardURL}),o=(r-1)*a,i=a,e.next=5,t.getLinkedObjects(n,{offset:o,limit:i});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.set((function(e){switch(e.linkedObjectsCollection.status){case We.LOADING:case We.LOADED:case We.RELOADING:return qe({},e,{linkedObjectsCollection:qe({},e.linkedObjectsCollection,{status:We.LOADING})});case We.NONE:case We.ERROR:default:return qe({},e,{linkedObjectsCollection:{status:We.LOADING,data:{linkedObjects:[],page:r,pageSize:a,totalCount:0}}})}})),i=new Je(o),this.currentTask=i,e.prev=6,e.next=9,i.run();case 9:if(s=e.sent,!i.isCanceled()){e.next=12;break}return e.abrupt("return");case 12:this.set((function(e){return qe({},e,{linkedObjectsCollection:{status:We.LOADED,data:qe({},s,{page:r,pageSize:a})}})})),this.currentTask=null,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),console.error("ERROR",e.t0),this.set((function(t){return qe({},t,{linkedObjectsCollection:{status:We.ERROR,error:{code:"not-found",message:e.t0.message,source:"LinkedDataDB.fetchLinkedObjects"}}})}));case 20:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(Xe),Ze=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"onChangePage",value:function(e,t){this.props.setPage(e,t||12)}},{key:"onChangeTable",value:function(e,t,n){var r;n.column&&n.column.dataIndex?r={sortColumn:n.column.dataIndex,sortDirection:function(e){switch(e){case"ascending":return Ve.ASCENDING;case"descending":return Ve.DESCENDING;default:throw new Error("Unknown sort direction: "+e)}}("descend"===n.order?"descending":"ascending")}:r=null;this.props.updateView(e.current||1,e.pageSize||12,r)}},{key:"componentDidMount",value:function(){this.props.setPage(1,12)}},{key:"componentDidUpdate",value:function(e){switch(e.linkedObjectsCollection.status){case We.NONE:case We.LOADING:case We.LOADED:case We.ERROR:case We.RELOADING:}}},{key:"renderLinkedObjects",value:function(e,t){return s.a.createElement(De.a,{dataSource:e.linkedObjects,size:"small",className:"KBaseAntdOverride-remove-table-border ScrollingFlexTable",bordered:!1,rowKey:function(e){return[e.workspaceID,e.objectID,e.version].join("/")},pagination:{position:"top",defaultPageSize:12,total:e.totalCount},loading:t,onChange:this.onChangeTable.bind(this)},s.a.createElement(He.a,{title:"Type",dataIndex:"type",width:"10%",render:function(e){var t=[[e.module,e.name].join("."),[e.majorVersion,e.minorVersion].join(".")].join("-");return s.a.createElement("a",{href:"/#spec/type/".concat(t),target:"_blank",rel:"noopener noreferrer"},e.name)}}),s.a.createElement(He.a,{title:"Object",dataIndex:"objectName",width:"35%",sorter:!0,render:function(e,t){var n=["","#dataview",t.workspaceID,t.objectID,t.version].join("/"),r={fontStyle:"italic",marginRight:"3px"},a=s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{style:r},"Ref"),s.a.createElement("span",null,t.workspaceID,"/",t.objectID,"/",t.version)),s.a.createElement("div",null,s.a.createElement("span",{style:r},"Workspace ID"),s.a.createElement("span",null,t.workspaceID)),s.a.createElement("div",null,s.a.createElement("span",{style:r},"Object ID"),s.a.createElement("span",null,t.objectID)),s.a.createElement("div",null,s.a.createElement("span",{style:r},"Version"),s.a.createElement("span",null,t.version)));return s.a.createElement(ie.a,{title:a},s.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},e))}}),s.a.createElement(He.a,{title:"Narrative",width:"35%",dataIndex:"workspaceID",render:function(e){return s.a.createElement("a",{href:"/narrative/".concat(e),target:"_blank",rel:"noopener noreferrer"},"Narrative or refdata ws title")}}),s.a.createElement(He.a,{title:"Object Created",dataIndex:"createdAt",width:"10%",sorter:!0,render:function(e){return Intl.DateTimeFormat("en-US").format(e)}}),s.a.createElement(He.a,{title:"Linked At",dataIndex:"linkedAt",width:"10%",sorter:!0,defaultSortOrder:"descend",render:function(e){return Intl.DateTimeFormat("en-US").format(e)}}))}},{key:"renderLoading",value:function(){return s.a.createElement(me.a,null)}},{key:"renderError",value:function(e){return s.a.createElement(ce.a,{type:"error",message:e.message})}},{key:"render",value:function(){var e=this.props.linkedObjectsCollection;switch(e.status){case We.NONE:return this.renderLoading();case We.ERROR:return this.renderError(e.error);case We.LOADING:return this.renderLinkedObjects(e.data,!0);case We.LOADED:return this.renderLinkedObjects(e.data,!1);case We.RELOADING:return this.renderLinkedObjects(e.data,!0)}}}]),t}(s.a.Component),et=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.lastTaxonRef=void 0,n.db=new Qe({onUpdate:function(){n.forceUpdate()},initialData:{linkedObjectsCollection:{status:We.NONE}},token:e.token,config:e.config}),n.lastTaxonRef=e.taxonRef,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){this.lastTaxonRef!==this.props.taxonRef&&(this.lastTaxonRef=this.props.taxonRef,this.db.fetchLinkedObjects({taxonRef:this.props.taxonRef,page:1,pageSize:12}))}},{key:"fetchLinkedObjects",value:function(e,t){return this.db.fetchLinkedObjects({taxonRef:this.props.taxonRef,page:e,pageSize:t})}},{key:"queryLinkedObjects",value:function(e,t,n){return this.db.queryLinkedObjects({taxonRef:this.props.taxonRef,page:e,pageSize:t,sort:n})}},{key:"render",value:function(){var e=this.db.get();return s.a.createElement(Ze,{linkedObjectsCollection:e.linkedObjectsCollection,updateView:this.queryLinkedObjects.bind(this),setPage:this.fetchLinkedObjects.bind(this)})}}]),t}(s.a.Component);var tt=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(){return{}}))(et),nt=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(Ie.a,{defaultActiveKey:"detail",animated:!1,className:"FullHeight-tabs"},s.a.createElement(Ie.a.TabPane,{tab:"Detail",key:"detail",forceRender:!1},s.a.createElement("div",{className:"Col",style:{overflowY:"auto"}},s.a.createElement(Ae,{taxon:this.props.taxon}))),s.a.createElement(Ie.a.TabPane,{tab:"Description",key:"description",forceRender:!1},s.a.createElement(Fe,{taxon:this.props.taxon})),s.a.createElement(Ie.a.TabPane,{tab:"Linked Data",key:"linkedData",forceRender:!1},s.a.createElement("div",{className:"Col",style:{overflowY:"auto"}},s.a.createElement(tt,{taxonRef:this.props.taxon.ref}))))}}]),t}(s.a.Component),rt=(n(796),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderTaxonInfo",value:function(){return this.props.selectedTaxon?s.a.createElement(nt,{taxon:this.props.selectedTaxon}):s.a.createElement("div",null,"No taxon selected")}},{key:"componentDidMount",value:function(){this.props.setTitle('Taxonomy Landing Page for "'+this.props.targetTaxon.name+'"')}},{key:"render",value:function(){return s.a.createElement("div",{className:"Col scrollable Taxonomy"},s.a.createElement("div",{className:"Col-auto Taxonomy-summary-section"},s.a.createElement(re.a,null,s.a.createElement(ae.a,{span:12},s.a.createElement(Re,{taxon:this.props.targetTaxon})),s.a.createElement(ae.a,{span:12},s.a.createElement(oe,null)))),s.a.createElement("div",{className:"Row scrollable"},s.a.createElement("div",{className:"Col scrollable",style:{flex:"0 0 20em"}},s.a.createElement(Ne,{selectedTaxon:this.props.selectedTaxon,selectTaxonRef:this.props.selectTaxonRef,targetTaxon:this.props.targetTaxon,navigateToTaxonRef:this.props.navigateToTaxonREf})),s.a.createElement("div",{className:"Col scrollable",style:{marginLeft:"10px"}},this.renderTaxonInfo())))}}]),t}(s.a.Component)),at=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.currentlyNavigatedTaxonRef=void 0,n.db=new ne({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n.currentlyNavigatedTaxonRef=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"selectTaxon",value:function(e){return this.db.getSelectedTaxon(e)}},{key:"navigateToTaxon",value:function(e){return this.props.navigate(e)}},{key:"renderLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderError",value:function(e){return s.a.createElement("div",{className:"Col"},s.a.createElement("div",{style:{width:"50%",margin:"20px auto 0 auto"}},s.a.createElement(be,{error:e.error})))}},{key:"renderLoaded",value:function(e){return s.a.createElement(rt,{targetTaxon:e.targetTaxon,selectedTaxon:e.selectedTaxon,selectTaxonRef:this.selectTaxon.bind(this),navigateToTaxonREf:this.navigateToTaxon.bind(this),setTitle:this.props.setTitle})}},{key:"componentDidMount",value:function(){this.db.getTargetTaxon(this.props.taxonRef)}},{key:"componentDidUpdate",value:function(e){e.taxonRef.id===this.props.taxonRef.id&&e.taxonRef.timestamp===this.props.taxonRef.timestamp||this.db.getTargetTaxon(this.props.taxonRef)}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.NONE:case K.LOADING:return this.renderLoading();case K.ERROR:return this.renderError(e);case K.LOADED:return this.renderLoaded(e)}}}]),t}(s.a.Component);var ot=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(e,t){return{navigate:function(t){var n=["taxonomy",_(t.namespace),t.id,String(t.timestamp)].join("/");e(B(n))},setTitle:function(t){e(Object(b.sendTitle)(t))}}}))(at);var it=Object(h.connect)((function(e,t){return{}}),(function(e,t){return{navigate:function(t){e(B(t))},setTitle:function(t){e(Object(b.sendTitle)(t))}}}))(ot),st=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getParents",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o={ns:n,id:r,ts:a},e.next=4,this.callFunc("get_parents",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTerms",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.ids,a=t.ts,o={ns:n,ids:r,ts:a},e.next=4,this.callFunc("get_terms",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildren",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o={ns:n,id:r,ts:a},e.next=4,this.callFunc("get_children",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelatedObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a,o,i,s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ns,r=t.id,a=t.ts,o={ns:n,id:r,ts:a},e.next=4,this.callFunc("get_children",[o]);case 4:return i=e.sent,s=Object(k.a)(i,1),c=s[0],e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(T.DynamicServiceClient);function ct(e){switch(e){case D.GO:return"go"}}function lt(e,t){switch(function(e){switch(e){case"go":return D.GO;default:throw new Error("Unknown ontology namespace: "+e)}}("go")){case D.GO:return{type:C.GO,ref:{collection:R.ONTOLOGY,namespace:D.GO,id:e.id,timestamp:t},namespace:e.namespace,comments:e.comments,definition:e.def.val,goID:e.id,isObsolete:!1,name:e.name,synonyms:{exact:e.synonyms.filter((function(e){return"hasExactSynonym"===e.pred})).map((function(e){return e.val})),narrow:e.synonyms.filter((function(e){return"hasNarrowSynonym"===e.pred})).map((function(e){return e.val})),broad:e.synonyms.filter((function(e){return"hasBroadSynonym"===e.pred})).map((function(e){return e.val})),related:e.synonyms.filter((function(e){return"hasRelatedSynonym"===e.pred})).map((function(e){return e.val}))}}}}function ut(e,t){return{term:lt(e.term,t),relation:function(e){switch(e){case"is_a":return L.IS_A;case"part_of":return L.PART_OF;case"has_part":return L.HAS_PART;case"regulates":return L.REGULATES;case"positively_regulates":return L.POSITIVELY_REGULATES;case"negatively_regulates":return L.NEGATIVELY_REGULATES;case"occurs_in":return L.OCCURS_IN;case"ends_during":return L.ENDS_DURING;case"happens_during":return L.HAPPENS_DURING;default:throw new Error("Unknown relation: "+e)}}(e.edge.type)}}st.module="OntologyAPI";var pt=function(){function e(t){var n=t.token,r=t.url;Object(u.a)(this,e),this.ontologyClient=void 0,this.token=void 0,this.url=void 0,this.token=n,this.url=r,this.ontologyClient=new st({token:n,url:r})}return Object(p.a)(e,[{key:"getTerm",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ref,r=new st({token:this.token,url:this.url}),e.next=4,r.getTerms({ns:ct(n.namespace),ids:[n.id],ts:n.timestamp||Date.now()});case 4:return a=e.sent,e.abrupt("return",{term:lt(a.results[0],a.ts)});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getParents",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ref,r=new st({token:this.token,url:this.url}),e.next=4,r.getParents({ns:ct(n.namespace),id:n.id,ts:n.timestamp||Date.now()});case 4:return a=e.sent,e.abrupt("return",{terms:a.results.map((function(e){return ut(e,a.ts)}))});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChildren",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ref,r=new st({token:this.token,url:this.url}),e.next=4,r.getChildren({ns:ct(n.namespace),id:n.id,ts:n.timestamp||Date.now()});case 4:return a=e.sent,e.abrupt("return",{terms:a.results.map((function(e){return ut(e,a.ts)}))});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props=void 0,n.props=e,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getTargetTerm",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.set((function(e){return ft({},e,{status:K.LOADING})})),n=new pt({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.prev=2,e.next=5,n.getTerm({ref:t});case 5:r=e.sent,a=r.term,this.set((function(e){return ft({},e,{status:K.LOADED,targetTerm:a,selectedTerm:a})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("ERROR",e.t0),this.set((function(t){return ft({},t,{status:K.ERROR,error:e.t0.message})}));case 14:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setSelectedTerm",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.get().status===K.LOADED){e.next=3;break}return e.abrupt("return");case 3:return n=new pt({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.next=6,n.getTerm({ref:t});case 6:r=e.sent,a=r.term,this.set((function(e){return ft({},e,{selectedTerm:a})}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),ht=(n(797),n(798),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderGOLink",value:function(e){var t="http://amigo.geneontology.org/amigo/term/".concat(e.goID),n=this.props.newWindow?"_blank":"_parent";return s.a.createElement("a",{href:t,target:n},e.ref.id)}},{key:"render",value:function(){var e=this.props.term;switch(e.type){case C.GO:return this.renderGOLink(e)}}}]),t}(s.a.Component));function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props=void 0,n.props=e,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getLinkedObjects",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.set((function(e){return bt({},e,{status:K.LOADING})})),n=[{object:{workspaceID:43747,id:4,version:1},type:{module:"KBaseGenomes",name:"Genome"},scientificName:"Escherichia coli",feature:"CF61_RS00005"},{object:{workspaceID:43747,id:4,version:1},type:{module:"KBaseGenomes",name:"Genome"},scientificName:"Escherichia coli",feature:"CF61_RS00005"},{object:{workspaceID:43747,id:4,version:1},type:{module:"KBaseGenomes",name:"Genome"},scientificName:"Escherichia coli",feature:"CF61_RS00005"},{object:{workspaceID:43747,id:4,version:1},type:{module:"KBaseGenomes",name:"Genome"},scientificName:"Escherichia coli",feature:"CF61_RS00005"}],this.set((function(e){return bt({},e,{status:K.LOADED,linkedObjects:n})}))}catch(t){this.set((function(e){return{status:K.ERROR,error:{code:"not-found",source:"LinkedObjectsDB.getLinkedObjects",message:t.message}}}))}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),gt=(n(799),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderTable",value:function(){return s.a.createElement(De.a,{dataSource:this.props.linkedObjects,className:"KBaseAntdOverride-remove-table-border ScrollingFlexTable",size:"small",pagination:!1,scroll:{y:"100%"},bordered:!1},s.a.createElement(De.a.Column,{dataIndex:"scientificName",title:"Scientific Name",width:"40%"}),s.a.createElement(De.a.Column,{dataIndex:"type.name",title:"Type",width:"30%"}),s.a.createElement(De.a.Column,{dataIndex:"feature",title:"Feature",width:"30%"}))}},{key:"renderNone",value:function(){return s.a.createElement("p",{style:{fontStyle:"italic"}},"No objects use this term.")}},{key:"render",value:function(){return 0===this.props.linkedObjects.length?this.renderNone():this.renderTable()}}]),t}(s.a.Component)),yt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.db=new Ot({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderError",value:function(e){return s.a.createElement(be,{error:e.error})}},{key:"renderLoaded",value:function(e){return s.a.createElement(gt,{linkedObjects:e.linkedObjects})}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.NONE:return this.db.getLinkedObjects(this.props.termRef),this.renderLoading();case K.LOADING:return this.renderLoading();case K.ERROR:return this.renderError(e);case K.LOADED:return this.renderLoaded(e)}}}]),t}(s.a.Component);var Et=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(){return{}}))(yt);function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props=void 0,n.props=e,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"getChildrenTerms",value:function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.set((function(e){return jt({},e,{status:K.LOADING})})),n=new pt({token:this.props.token,url:this.props.config.services.ServiceWizard.url}),e.prev=2,e.next=5,n.getChildren({ref:t});case 5:r=e.sent,(a=r.terms).sort((function(e,t){return e.term.name.localeCompare(t.term.name)})),this.set((function(e){return jt({},e,{status:K.LOADED,terms:a})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("ERROR",e.t0),this.set((function(t){return jt({},t,{status:K.ERROR,error:e.t0.message})}));case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(J),wt=(n(800),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderRelation",value:function(e){return function(e){switch(e){case L.IS_A:return"is_a";case L.PART_OF:return"part_of";case L.HAS_PART:return"has_part";case L.REGULATES:return"regulates";case L.POSITIVELY_REGULATES:return"positively_regulates";case L.NEGATIVELY_REGULATES:return"negatively_regulates";case L.OCCURS_IN:return"occurs_in";case L.ENDS_DURING:return"ends_during";case L.HAPPENS_DURING:return"happens_during"}}(e)}},{key:"renderItemsTable",value:function(){var e=this;return s.a.createElement(De.a,{dataSource:this.props.terms,className:"KBaseAntdOverride-remove-table-border ScrollingFlexTable",size:"small",pagination:!1,scroll:{y:"100%"}},s.a.createElement(He.a,{dataIndex:"term.name",title:"Name",width:"60%"}),s.a.createElement(He.a,{dataIndex:"term.goID",title:"ID",width:"20%",render:function(e,t){return s.a.createElement("a",{href:"/#review/ontology/go/".concat(e,"/").concat(t.term.ref.timestamp),target:"_parent"},e)}}),s.a.createElement(He.a,{dataIndex:"relation",title:"Relation",width:"20%",render:function(t){return e.renderRelation(t)}}))}},{key:"renderNoItems",value:function(){return s.a.createElement(he.a,{description:"No Children",image:he.a.PRESENTED_IMAGE_SIMPLE})}},{key:"render",value:function(){return 0===this.props.terms.length?this.renderNoItems():this.renderItemsTable()}}]),t}(s.a.Component)),xt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.currentlyNavigatedOntologyRef=void 0,n.db=new Tt({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n.currentlyNavigatedOntologyRef=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderError",value:function(e){return s.a.createElement("div",{className:"Col"},s.a.createElement("div",{style:{width:"50%",margin:"20px auto 0 auto"}},s.a.createElement(be,{error:e.error})))}},{key:"renderLoaded",value:function(e){return s.a.createElement(wt,{terms:e.terms})}},{key:"componentDidMount",value:function(){this.db.getChildrenTerms(this.props.termRef)}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.NONE:case K.LOADING:return this.renderLoading();case K.ERROR:return this.renderError(e);case K.LOADED:return this.renderLoaded(e)}}}]),t}(s.a.Component);var Nt=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(e,t){return{navigate:function(t){var n=["ontology",ct(t.namespace),t.id,String(t.timestamp)].join("/");e(B(n))},setTitle:function(t){e(Object(b.sendTitle)(t))}}}))(xt),Rt=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderSynonyms",value:function(e){return 0===e.length?s.a.createElement("i",null,"-"):e.map((function(e,t){return s.a.createElement("div",{key:String(t)},e)}))}},{key:"renderComments",value:function(){return 0===this.props.term.comments.length?s.a.createElement("i",null,"-"):this.props.term.comments.map((function(e,t){return s.a.createElement("p",{key:String(t)},e)}))}},{key:"renderDetail",value:function(){return s.a.createElement("div",{className:"InfoTable DetailTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"ID"),s.a.createElement("div",{className:"InfoTable-dataCol"},s.a.createElement(ht,{term:this.props.term,newWindow:!0}))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"Name"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.term.name)),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"Definition"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.term.definition)),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"Comments"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderComments())),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"synonyms"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderAllSynonyms())))}},{key:"renderAllSynonyms",value:function(){return s.a.createElement("div",{className:"InfoTable DetailTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"exact"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderSynonyms(this.props.term.synonyms.exact))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"narrow"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderSynonyms(this.props.term.synonyms.narrow))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"broad"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderSynonyms(this.props.term.synonyms.broad))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol"},"related"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.renderSynonyms(this.props.term.synonyms.broad))))}},{key:"renderGraph",value:function(){return s.a.createElement("div",null,"graph here...")}},{key:"renderLinkedObjects",value:function(){return s.a.createElement(Et,{termRef:this.props.term.ref})}},{key:"renderMetadata",value:function(){return s.a.createElement("div",null,"render metadata here...")}},{key:"renderChildren",value:function(){return s.a.createElement(Nt,{termRef:this.props.term.ref})}},{key:"render",value:function(){var e=[{tab:"graph",title:"Graph",component:this.renderGraph()},{tab:"detail",title:"Detail",component:this.renderDetail()},{tab:"synonyms",title:"Synonyms",component:this.renderAllSynonyms()},{tab:"children",title:"Children",component:this.renderChildren()},{tab:"linked",title:"Linked Objects",component:this.renderLinkedObjects()}];return s.a.createElement(b.FlexTabs,{tabs:e})}}]),t}(s.a.Component),It=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"Row"},s.a.createElement("div",{className:"Col-auto"},s.a.createElement("img",{src:"images/go-logo.png",style:{height:"64px"},alt:"Gene Ontology Logo"})),s.a.createElement("div",{className:"Col"},s.a.createElement("div",{className:"InfoTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Source"),s.a.createElement("div",{className:"InfoTable-dataCol"},s.a.createElement("a",{href:"http://geneontology.org/",target:"_blank",rel:"noopener noreferrer"},"Gene Ontology (GO)"))),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Version"),s.a.createElement("div",{className:"InfoTable-dataCol"},"SOME VERSION")))))}}]),t}(s.a.Component),Dt=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"InfoTable"},s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"ID"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.term.goID)),s.a.createElement("div",{className:"InfoTable-row"},s.a.createElement("div",{className:"InfoTable-labelCol",style:{width:"5em"}},"Name"),s.a.createElement("div",{className:"InfoTable-dataCol"},this.props.term.name)))}}]),t}(s.a.Component),Ct=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.setTitle('Ontology Landing Page for "'.concat(this.props.targetTerm.name,'" (').concat(this.props.targetTerm.goID,")"))}},{key:"renderLayout",value:function(){return s.a.createElement("div",{className:"Col scrollable Taxonomy"},s.a.createElement("div",{className:"Col-auto Ontology-summary-section"},s.a.createElement(re.a,null,s.a.createElement(ae.a,{span:12},s.a.createElement(Dt,{term:this.props.targetTerm})),s.a.createElement(ae.a,{span:12},s.a.createElement(It,null)))),s.a.createElement("div",{className:"Row scrollable"},s.a.createElement("div",{className:"Col scrollable"},s.a.createElement(Rt,{term:this.props.selectedTerm}))))}},{key:"render",value:function(){return this.renderLayout()}}]),t}(s.a.Component),Lt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).db=void 0,n.currentlyNavigatedOntologyRef=void 0,n.db=new mt({onUpdate:function(){n.forceUpdate()},initialData:{status:K.NONE},token:e.token,config:e.config}),n.currentlyNavigatedOntologyRef=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"selectTerm",value:function(e){return this.db.setSelectedTerm(e)}},{key:"navigateToTerm",value:function(e){return this.props.navigate(e)}},{key:"renderLoading",value:function(){return s.a.createElement(q.a,{type:"loading"})}},{key:"renderError",value:function(e){return s.a.createElement("div",{className:"Col"},s.a.createElement("div",{style:{width:"50%",margin:"20px auto 0 auto"}},s.a.createElement(be,{error:e.error})))}},{key:"renderLoaded",value:function(e){return s.a.createElement(Ct,{targetTerm:e.targetTerm,selectedTerm:e.selectedTerm,selectTerm:this.selectTerm.bind(this),navigate:this.navigateToTerm.bind(this),setTitle:this.props.setTitle})}},{key:"componentDidMount",value:function(){this.db.getTargetTerm(this.props.termRef)}},{key:"componentDidUpdate",value:function(e){e.termRef.id===this.props.termRef.id&&e.termRef.timestamp===this.props.termRef.timestamp||this.db.getTargetTerm(this.props.termRef)}},{key:"render",value:function(){var e=this.db.get();switch(e.status){case K.NONE:case K.LOADING:return this.renderLoading();case K.ERROR:return this.renderError(e);case K.LOADED:return this.renderLoaded(e)}}}]),t}(s.a.Component);var At=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.app.config;if(!n)throw new Error("Invalid state - no user authorization");return{token:n.token,config:r}}),(function(e,t){return{navigate:function(t){var n=["ontology",ct(t.namespace),t.id,String(t.timestamp)].join("/");e(B(n))},setTitle:function(t){e(Object(b.sendTitle)(t))}}}))(Lt);var St=Object(h.connect)((function(e,t){return{}}),(function(e,t){return{navigate:function(t){e(B(t))},setTitle:function(t){e(Object(b.sendTitle)(t))}}}))(At),Pt=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderUnauthorized",value:function(){return s.a.createElement("div",null,"Sorry, not authorized. Please log in first.")}},{key:"renderRootState",value:function(){switch(this.props.rootState){case b.RootState.NONE:case b.RootState.HOSTED:case b.RootState.DEVELOP:return"";case b.RootState.ERROR:return"error"}}},{key:"renderNavigationNone",value:function(){return s.a.createElement("div",null,"none")}},{key:"renderNavigationSome",value:function(e){switch(e.type){case o.TAXONOMY:return s.a.createElement(it,{taxonRef:e.ref});case o.ONTOLOGY:return console.log("navigation ref",e),s.a.createElement(St,{termRef:e.ref});default:console.error("Unhandled navigation",e)}}},{key:"renderNavigation",value:function(){switch(this.props.navigation.type){case o.NONE:return this.renderNavigationNone();default:return this.renderNavigationSome(this.props.navigation)}}},{key:"parseHash",value:function(e){var t=/^#(.*?)\/(.*)$/.exec(e);if(!t)throw new Error("Invalid path");var n=Object(k.a)(t,3);return{path:[n[1]],params:{relationEngineID:n[2]}}}},{key:"componentDidMount",value:function(){var e=this;if(this.props.rootState===b.RootState.DEVELOP){window.addEventListener("hashchange",(function(t){var n=new URL(t.newURL).hash;if(!n)throw new Error("no hash!");var r=e.parseHash(n).params.relationEngineID;e.props.navigate(r)}));var t=window.location.hash;if(t){var n=this.parseHash(t).params.relationEngineID;this.props.navigate(n)}else this.props.navigate("ontology/go/GO:0007610")}}},{key:"render",value:function(){return this.props.token?s.a.createElement("div",{className:"Col scrollable"},s.a.createElement("div",{className:"Row-auto"},this.renderRootState()),s.a.createElement("div",{className:"Row  scrollable"},this.renderNavigation())):this.renderUnauthorized()}}]),t}(s.a.Component);var Gt=Object(h.connect)((function(e,t){var n=e.auth.userAuthorization,r=e.root.state,a=e.navigation,o=e.trigger;return{token:n?n.token:null,rootState:r,navigation:a,trigger:o}}),(function(e,t){return{navigate:function(t){e(B(t))}}}))(Pt),_t=Object(O.d)(X,H(),Object(O.c)(Object(O.a)(g.a))),Ut=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).storeUnsubscribe=void 0,n.storeUnsubscribe=null,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e={view:null,params:{}};this.storeUnsubscribe=_t.subscribe((function(){var t=_t.getState();if(t){var n=t.app.runtime.navigation;if(t.auth.userAuthorization){var r=n.view,a=n.params;(r!==e.view||null===e.params||Object.keys(a).some((function(t){return a[t]!==e.params[t]})))&&(e.params=a,e.view=r,a.relationEngineID&&_t.dispatch(B(a.relationEngineID)))}}}))}},{key:"componentWillUnmount",value:function(){this.storeUnsubscribe&&this.storeUnsubscribe()}},{key:"render",value:function(){return s.a.createElement(h.Provider,{store:_t},s.a.createElement(b.AppBase,null,s.a.createElement(b.AuthGate,{required:!0},s.a.createElement("div",{className:"App Col scrollable"},s.a.createElement(Gt,null)))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(Ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[384,1,2]]]);
//# sourceMappingURL=main.521502dc.chunk.js.map