{"version":3,"sources":["redux/actions.ts","redux/reducers.ts","redux/store.ts","components/landingPages/taxonomy/lib/DB.ts","components/Loading.tsx","components/landingPages/taxonomy/redux/store.ts","components/landingPages/taxonomy/lib/TaxonAPIClient.ts","components/landingPages/taxonomy/lib/model.ts","components/landingPages/taxonomy/main/TaxonDB.ts","components/landingPages/taxonomy/SourceInfo.tsx","components/landingPages/taxonomy/TaxonItem.tsx","components/landingPages/taxonomy/taxonChildren/TaxonChildrenDB.ts","components/landingPages/taxonomy/TaxonList.tsx","components/landingPages/taxonomy/taxonChildren/TaxonChildren.tsx","components/landingPages/taxonomy/taxonChildren/data.tsx","components/landingPages/taxonomy/taxonChildren/index.ts","components/landingPages/taxonomy/lineage/LineageDB.ts","components/landingPages/taxonomy/lineage/Lineage.tsx","components/landingPages/taxonomy/lineage/data.tsx","components/landingPages/taxonomy/lineage/index.ts","components/landingPages/taxonomy/LineageNavigator.tsx","components/landingPages/taxonomy/TaxonSummary.tsx","components/landingPages/taxonomy/taxonInfo/TaxonDetailNCBI.tsx","components/landingPages/taxonomy/taxonInfo/TaxonDetail.tsx","components/landingPages/taxonomy/lib/props.ts","components/Wikipedia.tsx","components/landingPages/taxonomy/lib/Wikipedia.ts","components/landingPages/taxonomy/taxonInfo/TaxonDescription.tsx","components/landingPages/taxonomy/linkedData/LinkedDataDB.ts","components/landingPages/taxonomy/linkedData/LinkedData.tsx","components/landingPages/taxonomy/linkedData/data.tsx","components/landingPages/taxonomy/linkedData/index.ts","components/landingPages/taxonomy/taxonInfo/TaxonInfo.tsx","components/landingPages/taxonomy/main/Taxonomy.tsx","components/landingPages/taxonomy/main/data.tsx","components/landingPages/taxonomy/main/index.ts","components/landingPages/taxonomy/index.ts","components/dispatcher/Dispatcher.tsx","components/dispatcher/index.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["AppActions","navigate","relationEngineID","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","getState","_relationEngineID$spl","_relationEngineID$spl2","collection","id","wrap","_context","prev","next","type","NAVIGATE_START","split","slicedToArray","navigation","ViewType","TAXONOMY","join","NAVIGATE_SUCCESS","stop","_x","_x2","apply","this","arguments","navigateSuccess","state","action","_objectSpread","trigger","Date","now","RelationEngineNodeType","ViewStatus","reducer","baseState","baseReducer","makeInitialStoreState","store_objectSpread","makeBaseStoreState","NONE","DBStatus","Loading","react_default","createElement","className","spin","size","props","message","React","Component","TaxonomySource","LoadingStatus","DB","classCallCheck","db","onUpdate","data","initialData","updateFun","forceComponentUpdate","TaxonomyAPIClient","taxonID","callFunc","result","offset","limit","searchTerm","search_text","taxon_id","DynamicServiceClient","module","TaxonomyModel","token","url","taxonomyClient","TaxonAPIClient","createClass","key","value","_getLineage","taxons","getLineage","sent","results","map","taxonResult","isBiological","scientific_name","NCBI","_id","name","rank","ncbiID","NCBI_taxon_id","geneticCode","parseInt","gencode","aliases","_ref2","category","abrupt","_getChildren","_callee2","options","taxa","_context2","getChildren","_ref3","total_count","_x3","_getTaxon","_callee3","taxon","_context3","getTaxon","count","Error","_ref4","_x4","_getLinkedObjects","_callee4","_context4","getAssociatedWorkspaceObjects","console","log","linkedAt","objectID","workspaceID","version","_x5","_x6","TaxonDB","_this","possibleConstructorReturn","getPrototypeOf","call","set","TaxonDB_objectSpread","status","LOADING","client","config","services","ServiceWizard","LOADED","targetTaxon","selectedTaxon","error","t0","ERROR","SourceInfo","_React$Component","inherits","src","style","height","alt","width","href","target","TaxonItem","hovering","selectTaxonID","fixedID","replace","hash","concat","window","parent","location","ev","setState","Fragment","onClick","clickNavigateToTaxon","bind","clickTaxon","icon","isActive","renderActive","renderOver","renderNormal","classNames","push","tooltipTitle","borderBottom","tooltip","title","placement","onMouseEnter","onMouseLeave","renderItem","serviceWizardURL","page","pageSize","TaxonChildrenDB_objectSpread","RELOADING","totalCount","total","TaxonList","navigateToTaxonID","selectedTaxonID","TaxonItem_TaxonItem","selectTaxon","navigateToTaxon","empty","description","image","PRESENTED_IMAGE_SIMPLE","length","renderNoItems","renderItemsPlain","TaxonChildren","fetchChildren","Intl","NumberFormat","useGrouping","format","currentItem","lastItem","renderTitleLoaded","renderTitleReLoading","term","disabled","marginBottom","input","Search","placeholder","onSearch","doSearch","TaxonList_TaxonList","totalItems","maxItems","tip","renderTaxaLoaded","es_alert","renderTaxaNone","renderTaxaLoading","renderTaxaReLoading","renderTaxaError","pagination","showLessItems","hideOnSinglePage","defaultPageSize","current","onChange","changePage","renderPaginationNone","renderPaginationLoading","renderPaginationError","renderPaginationLoaded","renderPaginationReLoading","renderTitle","renderSearch","renderPagination","renderTaxa","renderChildren","Data","forceUpdate","TaxonChildren_TaxonChildren","get","connect","userAuthorization","auth","app","DataComponent","LineageDB","LineageDB_objectSpread","lineage","Lineage","Lineage_Lineage","renderLoading","renderError","renderLoaded","LineageNavigator","taxonId","param","taxonomy_lineage","selectedId","taxonomy_taxonChildren","renderLineage","renderTargetTaxon","TaxonSummary","nameStyle","fontStyle","geneticCodesMap","geneticCodes","Array","ensureGeneticCodes","reduce","label","Map","TaxonDetailNCBI","stringSorter","b","fixedA","fixedB","localeCompare","table","dataSource","scroll","y","rowKey","bordered","Column","dataIndex","defaultSortOrder","sorter","rel","renderAliases","renderTaxonDetail","TaxonDetail","TaxonDetailNCBI_TaxonDetailNCBI","getProp","obj","propPath","defaultValue","TypeError","temp","i","undefined","AsyncComponentLoadingState","NotFound","WIKIPEDIA_API_URL","Wikipedia","proposedTerm","chars","validChar","filter","char","exec","lookupTerm","scrubTerm","getWikipediaInfo","then","imageUrl","pageUrl","introText","pageId","matchingTerms","exactMatch","getPage","wikiResponse","Promise","all","_this2","getImage","parse","pageid","getPageInfo","pageInfo","terms","resolve","reject","fetchPage","apiUrl","URL","query","searchParams","fetch","toString","method","headers","accept","json","code","pop","ex","catch","err","apiURL","String","wikipediaClient","canceled","WikipediaClient","wikipediaInfo","content","marked","overflow","dangerouslySetInnerHTML","__html","color","fontSize","textAlign","display","flexDirection","flex","renderMatch","alignSelf","marginLeft","renderWikipediaLogoCredit","paddingRight","marginRight","overflowY","renderArticle","renderImage","findTerm","updateInfo","Loading_Loading","renderWikipediaInfo","renderNone","TaxonDescription","components_Wikipedia_Wikipedia","renderTaxonDescription","notBiological","LinkedDataDB","LinkedDataDB_objectSpread","getLinkedObjects","linkedObjects","LinkedData","fetchLinkedObjects","LinkedData_LinkedData","TaxonInfo","tabs","defaultActiveKey","animated","TabPane","tab","forceRender","TaxonDetail_TaxonDetail","TaxonDescription_TaxonDescription","linkedData","Taxonomy","TaxonInfo_TaxonInfo","setTitle","row","col","span","TaxonSummary_TaxonSummary","SourceInfo_SourceInfo","LineageNavigator_LineageNavigator","renderTaxonInfo","getSelectedTaxon","Taxonomy_Taxonomy","getTargetTaxon","sendTitle","ownProps","relationEngineId","Dispatcher","rootState","RootState","HOSTED","DEVELOP","view","relationEngineNodeType","TAXON","taxonomy","renderNavigationNone","renderNavigationSome","m","_m","path","params","addEventListener","newURL","parseHash","renderRootState","renderNavigation","renderUnauthorized","root","store","createStore","compose","applyMiddleware","thunk","App","storeSubscription","last","subscribe","runtime","keys","some","es","lib","dispatcher","Boolean","hostname","match","ReactDOM","render","App_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.20004a49.chunk.js","sourcesContent":["import { Action } from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { StoreState, RelationEngineID, NavigationSome, ViewType } from './store';\n// import * as uiLib from '@kbase/ui-lib';\n\nexport enum AppActions {\n    NAVIGATE = 'kbase-ui-plugin-landing-pages/navigate',\n    NAVIGATE_START = 'kbase-ui-plugin-landing-pages/navigate/start',\n    NAVIGATE_SUCCESS = 'kbase-ui-plugin-landing-pages/navigate/success',\n    NAVIGATE_ERROR = 'kbase-ui-plugin-landing-pages/navigate/error'\n}\n\nexport interface Navigate extends Action<AppActions.NAVIGATE> {\n    type: AppActions.NAVIGATE;\n    relationEngineID: RelationEngineID;\n}\n\nexport interface NavigateStart extends Action<AppActions.NAVIGATE_START> {\n    type: AppActions.NAVIGATE_START;\n}\n\nexport interface NavigateSuccess extends Action<AppActions.NAVIGATE_SUCCESS> {\n    type: AppActions.NAVIGATE_SUCCESS;\n    navigation: NavigationSome;\n    // relationEngineID: RelationEngineID;\n    // relationEngineNodeType: RelationEngineNodeType;\n    // viewType: ViewType;\n    // view: LandingPageView;\n}\n\nexport interface NavigateError extends Action<AppActions.NAVIGATE_ERROR> {\n    type: AppActions.NAVIGATE_ERROR;\n    message: string;\n}\n\nexport function navigateStart(): NavigateStart {\n    return {\n        type: AppActions.NAVIGATE_START\n    };\n}\n\nexport function navigateSuccess(\n    navigation: NavigationSome\n    // viewType: ViewType,\n    // relationEngineID: RelationEngineID\n    // relationEngineNodeType: RelationEngineNodeType,\n\n    // view: LandingPageView\n): NavigateSuccess {\n    return {\n        type: AppActions.NAVIGATE_SUCCESS,\n        navigation\n        // relationEngineID,\n        // relationEngineNodeType,\n        // viewType\n        // view\n    };\n}\n\nexport function navigate(relationEngineID: RelationEngineID) {\n    return async (dispatch: ThunkDispatch<StoreState, void, Action>, getState: () => StoreState) => {\n        dispatch(navigateStart());\n\n        // TODO: when there is an api call \"get_node_info\" we can replace the\n        // node type determination code below.\n\n        // window.location.hash;\n\n        // We know, for now, that the node id is <collection/id>\n        const [collection, id] = relationEngineID.split(':');\n        // console.log('in navigate...', relationEngineID);\n        switch (collection) {\n            case 'ncbi_taxon':\n                // const view: TaxonomyView = {\n                //     status: ViewStatus.NONE\n                // };\n                dispatch(navigateSuccess({ type: ViewType.TAXONOMY, relationEngineID: [collection, id].join('/') }));\n            // dispatch(uiLib.navigate({ view: 'taxonomy', params: { relationEngineID } }));\n        }\n    };\n}\n","import { Action, Reducer } from 'redux';\nimport { baseReducer } from '@kbase/ui-lib';\nimport { BaseStoreState } from '@kbase/ui-lib';\nimport { StoreState } from './store';\nimport { AppActions, NavigateSuccess } from './actions';\n\nfunction navigateSuccess(state: StoreState, action: NavigateSuccess): StoreState {\n    // console.log('sick of the success?', action);\n    return {\n        ...state,\n        // view: {\n        //     status: ViewStatus.LOADED,\n        //     relationEngineID: action.relationEngineID,\n        //     relationEngineNodeType: action.relationEngineNodeType,\n        //     viewType: action.viewType,\n        //     currentView: action.view\n        // }\n        navigation: action.navigation,\n        trigger: Date.now()\n    };\n}\n\n// function navigateStart(state: StoreState, action: NavigateStart): StoreState {\n//     return {\n//         ...state,\n//         view: {\n//             status: ViewStatus.LOADING\n//         }\n//     };\n// }\n\nconst reducer: Reducer<StoreState | undefined, Action> = (state: StoreState | undefined, action: Action) => {\n    const baseState = baseReducer(state as BaseStoreState, action);\n    if (baseState) {\n        return baseState as StoreState;\n    }\n    if (!state) {\n        return state;\n    }\n    switch (action.type) {\n        // case AppActions.NAVIGATE_START:\n        //     return navigateStart(state, action as NavigateStart);\n        case AppActions.NAVIGATE_SUCCESS:\n            return navigateSuccess(state, action as NavigateSuccess);\n    }\n    return state;\n};\n\nexport default reducer;\n","import { BaseStoreState, makeBaseStoreState } from '@kbase/ui-lib';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from './reducers';\n\nimport { TaxonomyStoreState } from '../components/landingPages/taxonomy/redux/store';\n\nexport enum ViewType {\n    NONE,\n    TAXONOMY,\n    ONTOLOGY\n}\n\nexport type RelationEngineID = string;\nexport enum RelationEngineNodeType {\n    TAXON,\n    ONTOLOGY_TERM\n}\n\nexport enum ViewStatus {\n    NONE,\n    LOADING,\n    LOADED,\n    ERROR\n}\n\nexport interface RelationEngineViewBase {\n    status: ViewStatus;\n}\n\nexport interface RelationEngineViewNone {\n    status: ViewStatus.NONE;\n}\n\nexport interface RelationEngineViewLoading {\n    status: ViewStatus.LOADING;\n}\n\nexport interface RelationEngineViewLoaded {\n    status: ViewStatus.LOADED;\n    relationEngineID: RelationEngineID;\n    relationEngineNodeType: RelationEngineNodeType;\n    viewType: ViewType;\n    currentView: LandingPageView;\n}\n\nexport interface RelationEngineViewError {\n    status: ViewStatus.ERROR;\n    message: string;\n}\n\nexport type RelationEngineView =\n    | RelationEngineViewNone\n    | RelationEngineViewLoading\n    | RelationEngineViewLoaded\n    | RelationEngineViewError;\n\nexport interface LandingPageStoreState {}\n\n// VIEW STATE\n\nexport interface ViewStateNone<T> {\n    status: ViewStatus.NONE;\n}\n\nexport interface ViewStateLoading<T> {\n    status: ViewStatus.LOADING;\n    type: T;\n}\n\nexport interface ViewStateError<T> {\n    status: ViewStatus.ERROR;\n    error: string;\n    type: T;\n}\n\nexport interface ViewStateLoaded<T, S> {\n    status: ViewStatus.LOADED;\n    type: T;\n    state: S;\n}\nexport type ViewState<T, S> = ViewStateNone<T> | ViewStateLoading<T> | ViewStateLoaded<T, S> | ViewStateError<T>;\n\nexport type TaxonomyView = ViewState<ViewType.TAXONOMY, TaxonomyStoreState>;\n\nexport interface NavigationBase {\n    type: ViewType;\n    relationEngineID: RelationEngineID;\n}\n\nexport interface NavigationNone {\n    type: ViewType.NONE;\n}\n\nexport interface NavigationTaxonomy {\n    type: ViewType.TAXONOMY;\n    relationEngineID: RelationEngineID;\n}\n\nexport type NavigationSome = NavigationTaxonomy;\nexport type Navigation = NavigationNone | NavigationSome;\n\n// export interface ViewState<T, S> {\n//     type: T;\n//     state: S;\n// }\n\nexport type LandingPageView = TaxonomyView;\n\n// STORE STATE type definition\nexport interface StoreState extends BaseStoreState {\n    // viewer: TaxonView | null;\n    // view: RelationEngineView;\n    navigation: Navigation;\n    trigger: number;\n}\n\n// Store Construction\nexport function makeInitialStoreState(): StoreState {\n    const baseStoreState = makeBaseStoreState();\n    return {\n        ...baseStoreState,\n        // viewer: null,\n        navigation: {\n            type: ViewType.NONE\n        },\n        trigger: 0\n    };\n}\n\nexport function createReduxStore() {\n    return createStore(reducer, makeInitialStoreState(), compose(applyMiddleware(thunk)));\n}\n","export interface DBProps<T> {\n    onUpdate: () => void;\n    initialData: T;\n}\n\nexport interface TheDB<T> {\n    data: T;\n}\n\nexport enum DBStatus {\n    NONE,\n    LOADING,\n    LOADED,\n    RELOADING,\n    ERROR\n}\n\nexport interface DBStateNone {\n    status: DBStatus.NONE;\n}\n\nexport interface DBStateLoading {\n    status: DBStatus.LOADING;\n}\n\nexport interface DBStateReLoading {\n    status: DBStatus.RELOADING;\n}\n\nexport interface DBStateLoaded {\n    status: DBStatus.LOADED;\n}\n\nexport interface DBStateError {\n    status: DBStatus.ERROR;\n    message: string;\n}\n\nexport default class DB<T> {\n    db: TheDB<T>;\n    onUpdate: () => void;\n    constructor(props: DBProps<T>) {\n        this.onUpdate = props.onUpdate;\n        this.db = {\n            data: props.initialData\n        };\n    }\n\n    forceComponentUpdate() {\n        this.onUpdate();\n    }\n\n    set(updateFun: (state: T) => T) {\n        this.db.data = updateFun(this.db.data);\n        this.forceComponentUpdate();\n    }\n\n    get(): T {\n        return this.db.data;\n    }\n}\n","import React from 'react';\nimport { Spin } from 'antd';\nimport './Loading.css';\n\nexport interface Props {\n    message: string;\n}\n\ninterface State {}\n\nexport default class Loading extends React.Component<Props, State> {\n    render() {\n        return (\n            <div className=\"Loading-box\">\n                <Spin size=\"large\" />\n                <br />\n                {this.props.message}\n            </div>\n        );\n    }\n}\n","export type TaxonID = string;\n\n/**\n *\n */\nexport interface TaxonBase {\n    name: string;\n    id: string;\n    rank: string;\n    isBiological: boolean;\n}\n\nexport enum TaxonomySource {\n    NCBI,\n    GTDB\n}\n\nexport interface TaxonAlias {\n    category: string;\n    name: string;\n}\n\nexport interface NCBITaxon extends TaxonBase {\n    type: TaxonomySource.NCBI;\n    ncbiID: number;\n    geneticCode: number;\n    aliases: Array<TaxonAlias>;\n}\n\nexport interface GTDBTaxon extends TaxonBase {\n    type: TaxonomySource.GTDB;\n}\n\nexport type Taxon = NCBITaxon | GTDBTaxon;\n\nexport enum LoadingStatus {\n    NONE,\n    LOADING,\n    LOADED,\n    ERROR\n}\n\nexport interface NoneState {\n    status: LoadingStatus.NONE;\n}\n\nexport interface LoadingState {\n    status: LoadingStatus.LOADING;\n}\n\nexport interface ErrorState {\n    status: LoadingStatus.ERROR;\n    message: string;\n}\n\nexport interface LoadedState {\n    status: LoadingStatus.LOADED;\n}\n\nexport interface MainLoadedState extends LoadedState {\n    selectedTaxonID: TaxonID;\n    selectedTaxon: Taxon;\n    targetTaxon: Taxon;\n}\n\nexport type MainState = NoneState | LoadingState | ErrorState | MainLoadedState;\n\ntype State = NoneState | LoadedState | LoadingState | ErrorState;\n\nexport interface TaxonomyStoreState {\n    taxonomy: {\n        main: MainState;\n    };\n}\n\n// export function makeInitialStoreState(): TaxonomyStoreState {\n//     return {\n//         taxonomy: {\n//             main: {\n//                 state: {\n//                     status: LoadingStatus.NONE\n//                 }\n//             }\n//         }\n//     };\n// }\n\n// export function createReduxStore() {\n//     return createStore(reducer, makeInitialStoreState(), compose(applyMiddleware(thunk)));\n// }\n","import { DynamicServiceClient, DynamicServiceClientParams } from '@kbase/ui-lib';\n\ninterface TaxonomyAPIParams extends DynamicServiceClientParams {}\n\ntype TaxonID = string;\n\ninterface GetAncestorsParams {\n    id: TaxonID;\n}\n\ninterface GetDescendentsParams {\n    id: TaxonID;\n}\n\ninterface GetTaxonParams {\n    id: TaxonID;\n}\n\n// interface GetTaxonResultSuccess {\n//     count: true;\n//     taxon: Taxon;\n// }\n\n// interface GetTaxonResultNotFound {\n//     found: false;\n// }\n\n// type GetTaxonResult = GetTaxonResultSuccess | GetTaxonResultNotFound;\n\ninterface TaxonAlias {\n    canonical: Array<string>;\n    category: string;\n    name: string;\n}\n\ninterface TaxonResult {\n    NCBI_taxon_id: number;\n    _id: string;\n    _key: string;\n    _rev: string;\n    aliases: Array<TaxonAlias>;\n    canonical_scientific_name: Array<string>;\n    gencode: string;\n    rank: string;\n    scientific_name: string;\n}\n\ninterface GetTaxonResult {\n    count: number;\n    cursor_id: number | null;\n    has_more: false;\n    stats: {\n        executionTime: number;\n        filtered: number;\n        httpRequests: number;\n        scannedFull: number;\n        scannedIndex: number;\n        writesExecuted: number;\n        writesIgnored: number;\n    };\n    results: Array<TaxonResult>;\n}\n\ninterface GetLineageResult {\n    stats: {\n        executionTime: number;\n        filtered: number;\n        httpRequests: number;\n        scannedFull: number;\n        scannedIndex: number;\n        writesExecuted: number;\n        writesIgnored: number;\n    };\n    results: Array<TaxonResult>;\n}\n\ninterface GetChildrenResult {\n    stats: {\n        executionTime: number;\n        filtered: number;\n        httpRequests: number;\n        scannedFull: number;\n        scannedIndex: number;\n        writesExecuted: number;\n        writesIgnored: number;\n    };\n    results: Array<TaxonResult>;\n    total_count: number;\n}\nexport interface Stats {\n    executionTime: number;\n    filtered: number;\n    httpRequests: number;\n    scannedFull: number;\n    scannedIndex: number;\n    writesExecuted: number;\n    writesIgnored: number;\n}\nexport interface GetAssociatedWorkspaceObjectsResultResult {\n    edge: {\n        _id: string;\n        assigned_by: string;\n        updated_at: number;\n    };\n    taxon: {\n        _id: string;\n        rank: string;\n        scientific_name: string;\n        updated_at: number;\n    };\n}\n\nexport interface GetAssociatedWorkspaceObjectsResult {\n    results: Array<GetAssociatedWorkspaceObjectsResultResult>;\n    stats: Stats;\n}\n\nexport default class TaxonomyAPIClient extends DynamicServiceClient {\n    static module: string = 'taxonomy_re_api';\n\n    async getLineage(taxonID: TaxonID): Promise<GetLineageResult> {\n        const [result] = await this.callFunc<[GetLineageResult]>('get_lineage', [\n            {\n                id: taxonID\n            }\n        ]);\n        return result;\n    }\n\n    async getChildren({\n        taxonID,\n        offset,\n        limit,\n        searchTerm\n    }: {\n        taxonID: TaxonID;\n        offset: number;\n        limit: number;\n        searchTerm: string;\n    }): Promise<GetChildrenResult> {\n        const [result] = await this.callFunc<[GetChildrenResult]>('get_children', [\n            {\n                id: taxonID,\n                offset,\n                limit,\n                search_text: searchTerm\n            }\n        ]);\n        return result;\n    }\n\n    async getTaxon(taxonID: TaxonID): Promise<GetTaxonResult> {\n        const [result] = await this.callFunc<[GetTaxonResult]>('get_taxon', [\n            {\n                id: taxonID\n            }\n        ]);\n        return result;\n    }\n\n    async getAssociatedWorkspaceObjects(\n        taxon_id: TaxonID,\n        offset: number,\n        limit: number\n    ): Promise<GetAssociatedWorkspaceObjectsResult> {\n        const [result] = await this.callFunc<[GetAssociatedWorkspaceObjectsResult]>('get_associated_ws_objects', [\n            {\n                taxon_id,\n                limit,\n                offset\n            }\n        ]);\n        return result;\n    }\n}\n","import { TaxonID, Taxon, TaxonomySource, NCBITaxon } from '../redux/store';\nimport TaxonAPIClient from './TaxonAPIClient';\n\n// const INITIAL_BATCH_SIZE = 100;\n// const BATCH_SIZE = 1000;\n// const TOTAL_LIMIT = 10000;\n// const PARALLELISM = 2;\n\nexport interface GetChildrenOptions {\n    offset: number;\n    limit: number;\n    searchTerm: string;\n}\n\nexport interface LinkedObject {\n    linkedAt: number;\n    workspaceID: number;\n    objectID: number;\n    version: number;\n}\n\nexport interface GetLinkedObjectsOptions {\n    offset: number;\n    limit: number;\n}\n\nexport class TaxonomyModel {\n    taxonomyClient: TaxonAPIClient;\n    constructor({ token, url }: { token: string; url: string }) {\n        this.taxonomyClient = new TaxonAPIClient({ token, url });\n    }\n\n    async getLineage(taxonID: TaxonID): Promise<Array<Taxon>> {\n        const result = await this.taxonomyClient.getLineage(taxonID);\n        // TODO: should be conditional based on the source of the taxonomy??\n        const taxons: Array<NCBITaxon> = result.results.map((taxonResult) => {\n            let isBiological: boolean;\n            if (taxonResult.scientific_name === 'root' || taxonResult.scientific_name === 'cellular organisms') {\n                isBiological = false;\n            } else {\n                isBiological = true;\n            }\n            return {\n                type: TaxonomySource.NCBI,\n                id: taxonResult._id,\n                name: taxonResult.scientific_name,\n                rank: taxonResult.rank,\n                ncbiID: taxonResult.NCBI_taxon_id,\n                geneticCode: parseInt(taxonResult.gencode),\n                aliases: taxonResult.aliases.map(({ name, category }) => {\n                    return {\n                        name,\n                        category\n                    };\n                }),\n                isBiological\n            };\n        });\n        return taxons;\n    }\n\n    async getChildren(taxonID: TaxonID, options: GetChildrenOptions): Promise<[Array<Taxon>, number]> {\n        const result = await this.taxonomyClient.getChildren({\n            taxonID,\n            offset: options.offset,\n            limit: options.limit,\n            searchTerm: options.searchTerm\n        });\n\n        const taxa = result.results.map((taxonResult) => {\n            let isBiological: boolean;\n            if (taxonResult.scientific_name === 'root' || taxonResult.scientific_name === 'cellular organisms') {\n                isBiological = false;\n            } else {\n                isBiological = true;\n            }\n            return {\n                type: TaxonomySource.NCBI,\n                id: taxonResult._id,\n                name: taxonResult.scientific_name,\n                rank: taxonResult.rank,\n                ncbiID: taxonResult.NCBI_taxon_id,\n                geneticCode: parseInt(taxonResult.gencode),\n                aliases: taxonResult.aliases.map(({ name, category }) => {\n                    return {\n                        name,\n                        category\n                    };\n                }),\n                isBiological\n            };\n        });\n        return [taxa, result.total_count];\n    }\n\n    // async getChildrenx(taxonID: TaxonID, options: GetChildrenOptions): Promise<[Array<Taxon>, number, number]> {\n    //     // Loop over results until done!\n    //     // Get the first batch. In the majority of cases, this will be it.\n\n    //     const getBatch = async (batch: number, batchSize: number): Promise<[Array<Taxon>, number]> => {\n    //         const offset = batch * batchSize;\n    //         const result = await this.taxonomyClient.getChildren({\n    //             taxonID,\n    //             offset,\n    //             limit: batchSize\n    //         });\n\n    //         const taxa = result.results.map((taxonResult) => {\n    //             let isBiological: boolean;\n    //             if (taxonResult.scientific_name === 'root' || taxonResult.scientific_name === 'cellular organisms') {\n    //                 isBiological = false;\n    //             } else {\n    //                 isBiological = true;\n    //             }\n    //             return {\n    //                 type: TaxonomySource.NCBI,\n    //                 id: taxonResult._id,\n    //                 name: taxonResult.scientific_name,\n    //                 rank: taxonResult.rank,\n    //                 ncbiID: taxonResult.NCBI_taxon_id,\n    //                 geneticCode: parseInt(taxonResult.gencode),\n    //                 aliases: taxonResult.aliases.map(({ name, category }) => {\n    //                     return {\n    //                         name,\n    //                         category\n    //                     };\n    //                 }),\n    //                 isBiological\n    //             };\n    //         });\n    //         return [taxa, result.total_count];\n    //     };\n\n    //     const [taxa, totalCount] = await getBatch(0, INITIAL_BATCH_SIZE);\n\n    //     if (totalCount <= taxa.length) {\n    //         return [taxa, totalCount, totalCount];\n    //     }\n\n    //     // Here we cap the total results requested to TOTAL_LIMIT\n    //     let totalLimit = Math.min(totalCount, TOTAL_LIMIT);\n\n    //     // How many batches do we need to fetch?\n    //     const totalBatchCount = Math.ceil((totalLimit - INITIAL_BATCH_SIZE) / BATCH_SIZE);\n\n    //     // In order to avoid overwhelming the service, we need to limit the\n    //     // # of concurrent requests.\n    //     const iterations = Math.ceil(totalBatchCount / PARALLELISM);\n\n    //     console.log('BATCHES', totalBatchCount, iterations);\n\n    //     let result = taxa;\n\n    //     console.log('taxa', taxa);\n\n    //     for (let iter = 0; iter < iterations; iter += 1) {\n    //         const pendingBatches: Array<Promise<[Array<Taxon>, number]>> = [];\n\n    //         const batchCount = Math.min(PARALLELISM, totalBatchCount - iter * PARALLELISM);\n\n    //         console.log(`iter ${iter}`);\n\n    //         for (let batch = 0; batch < batchCount; batch += 1) {\n    //             const offset = iter * PARALLELISM + batch;\n    //             const batchSize = Math.min(BATCH_SIZE, totalLimit - offset * BATCH_SIZE);\n    //             console.log('BATCH SIZE', batchSize, iter, batch, totalLimit - offset * BATCH_SIZE);\n    //             pendingBatches.push(getBatch(offset, batchSize));\n    //             // const [nextResult] = await getBatch(i);\n    //             // console.log('adding another batch', nextResult);\n    //             // result = result.concat(nextResult);\n    //         }\n\n    //         const batches = await Promise.all(pendingBatches);\n\n    //         result = result.concat.apply(\n    //             result,\n    //             batches.map(([taxa, count]) => {\n    //                 return taxa;\n    //             })\n    //         );\n    //     }\n\n    //     return [result, totalCount, totalLimit];\n    // }\n\n    async getTaxon(taxonID: TaxonID): Promise<Taxon> {\n        const result = await this.taxonomyClient.getTaxon(taxonID);\n\n        if (!result.count) {\n            throw new Error('Taxon not found');\n        }\n        const taxonResult = result.results[0];\n        let isBiological: boolean;\n        if (taxonResult.scientific_name === 'root' || taxonResult.scientific_name === 'cellular organisms') {\n            isBiological = false;\n        } else {\n            isBiological = true;\n        }\n        const taxon: Taxon = {\n            type: TaxonomySource.NCBI,\n            id: taxonResult._id,\n            name: taxonResult.scientific_name,\n            rank: taxonResult.rank,\n            ncbiID: taxonResult.NCBI_taxon_id,\n            geneticCode: parseInt(taxonResult.gencode),\n            aliases: taxonResult.aliases.map(({ name, category }) => {\n                return {\n                    name,\n                    category\n                };\n            }),\n            isBiological\n        };\n        return taxon;\n    }\n\n    async getLinkedObjects(taxonID: TaxonID, options: GetLinkedObjectsOptions): Promise<Array<LinkedObject>> {\n        const result = await this.taxonomyClient.getAssociatedWorkspaceObjects(taxonID, options.offset, options.limit);\n\n        console.log('LINKED DATA', result, options);\n\n        return [\n            {\n                linkedAt: 0,\n                objectID: 0,\n                workspaceID: 0,\n                version: 0\n            }\n        ];\n    }\n}\n","import DB, { DBProps, DBStatus, DBStateNone, DBStateLoading, DBStateLoaded, DBStateError } from '../lib/DB';\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { Taxon, TaxonID } from '../redux/store';\nimport { TaxonomyModel } from '../lib/model';\n\nexport type TaxonDBStateNone = DBStateNone;\nexport type TaxonDBStateLoading = DBStateLoading;\nexport type TaxonDBStateError = DBStateError;\n\nexport interface TaxonDBStateLoaded extends DBStateLoaded {\n    targetTaxon: Taxon;\n    selectedTaxon: Taxon;\n}\n\nexport type TaxonDBState = TaxonDBStateNone | TaxonDBStateLoading | TaxonDBStateLoaded | TaxonDBStateError;\n\nexport interface TaxonDBProps extends DBProps<TaxonDBState> {\n    token: string;\n    config: AppConfig;\n}\n\n// TODO: make props part of generic\nexport default class TaxonDB extends DB<TaxonDBState> {\n    props: TaxonDBProps;\n    constructor(props: TaxonDBProps) {\n        super(props);\n        this.props = props;\n    }\n    async getTargetTaxon(taxonID: TaxonID) {\n        try {\n            this.set((state: TaxonDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADING\n                };\n            });\n\n            const client = new TaxonomyModel({\n                token: this.props.token,\n                url: this.props.config.services.ServiceWizard.url\n            });\n\n            const taxon = await client.getTaxon(taxonID);\n            this.set((state: TaxonDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADED,\n                    targetTaxon: taxon,\n                    selectedTaxon: taxon\n                };\n            });\n        } catch (ex) {\n            console.error('ERROR', ex);\n            this.set((state: TaxonDBState) => {\n                return {\n                    status: DBStatus.ERROR,\n                    message: ex.message\n                };\n            });\n        }\n    }\n\n    async getSelectedTaxon(taxonID: TaxonID) {\n        try {\n            // this.set((state: TaxonDBState) => {\n            //     return {\n            //         ...state,\n            //         status: DBStatus.LOADING\n            //     };\n            // });\n\n            const client = new TaxonomyModel({\n                token: this.props.token,\n                url: this.props.config.services.ServiceWizard.url\n            });\n\n            const taxon = await client.getTaxon(taxonID);\n            this.set((state: TaxonDBState) => {\n                return {\n                    ...state,\n                    selectedTaxon: taxon\n                };\n            });\n        } catch (ex) {\n            console.error('ERROR', ex);\n            this.set((state: TaxonDBState) => {\n                return {\n                    status: DBStatus.ERROR,\n                    message: ex.message\n                };\n            });\n        }\n    }\n}\n","import React from 'react';\nimport './SourceInfo.css';\n\nexport interface SourceInfoProps {}\n\ninterface SourceInfoState {}\n\nexport class SourceInfo extends React.Component<SourceInfoProps, SourceInfoState> {\n    render() {\n        return (\n            <div className=\"Row\">\n                <div className=\"Col-auto\">\n                    <img src=\"images/ncbi-logo.jpg\" style={{ height: '64px' }} alt=\"NCBI Logo\" />\n                </div>\n                <div className=\"Col\">\n                    <div className=\"InfoTable\">\n                        <div className=\"InfoTable-row\">\n                            <div className=\"InfoTable-labelCol\" style={{ width: '5em' }}>\n                                Source\n                            </div>\n                            <div className=\"InfoTable-dataCol\">\n                                <a href=\"https://www.ncbi.nlm.nih.gov/guide/taxonomy/\" target=\"_blank\">\n                                    NCBI\n                                </a>\n                            </div>\n                        </div>\n                        <div className=\"InfoTable-row\">\n                            <div className=\"InfoTable-labelCol\" style={{ width: '5em' }}>\n                                Version\n                            </div>\n                            <div className=\"InfoTable-dataCol\">SOME VERSION</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport { Taxon } from './redux/store';\nimport { Tooltip, Icon } from 'antd';\nimport './TaxonItem.css';\nimport { Button } from 'antd/lib/radio';\nimport ButtonGroup from 'antd/lib/button/button-group';\n\nexport interface Props {\n    taxon: Taxon;\n    isActive: boolean;\n    selectTaxonID: (taxonID: string) => void;\n    navigateToTaxonID: (taxonID: string) => void;\n}\n\ninterface State {\n    hovering: boolean;\n}\n\nexport default class TaxonItem extends React.Component<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            hovering: false\n        };\n    }\n    clickTaxon() {\n        this.props.selectTaxonID(this.props.taxon.id);\n    }\n    clickNavigateToTaxon() {\n        const fixedID = this.props.taxon.id.replace('/', ':');\n        const hash = `review/${fixedID}`;\n        // TODO: use the integration api?\n        if (window.parent) {\n            window.parent.location.hash = hash;\n        } else {\n            window.location.hash = hash;\n        }\n        // window.history.pushState({}, 'my title', `/#review/${this.props.taxon.id}`);\n        // this.props.navigateToTaxonID(this.props.taxon.id);\n    }\n\n    onMouseEnter(ev: React.MouseEvent<HTMLDivElement>) {\n        this.setState({ hovering: true });\n    }\n\n    onMouseLeave(ev: React.MouseEvent<HTMLDivElement>) {\n        this.setState({ hovering: false });\n    }\n\n    renderOver() {\n        return (\n            <React.Fragment>\n                <div className=\"TaxonItem-name\" onClick={this.clickNavigateToTaxon.bind(this)}>\n                    {this.props.taxon.name}\n                </div>\n                <div className=\"TaxonItem-inspector\" onClick={this.clickTaxon.bind(this)}>\n                    <Icon type=\"arrow-right\" />\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    renderActive() {\n        return (\n            <React.Fragment>\n                <div className=\"TaxonItem-name\" onClick={this.clickNavigateToTaxon.bind(this)}>\n                    {this.props.taxon.name}\n                </div>\n                <div className=\"TaxonItem-inspector\">\n                    <Icon type=\"arrow-right\" />\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    renderNormal() {\n        return (\n            <React.Fragment>\n                <div className=\"TaxonItem-name\">{this.props.taxon.name}</div>\n            </React.Fragment>\n        );\n    }\n\n    renderItem() {\n        if (this.props.isActive) {\n            return this.renderActive();\n        }\n        if (this.state.hovering) {\n            return this.renderOver();\n        } else {\n            return this.renderNormal();\n        }\n    }\n\n    render() {\n        const taxon = this.props.taxon;\n        const classNames = ['TaxonItem'];\n        if (this.props.isActive) {\n            classNames.push('TaxonItem-active');\n        }\n\n        const tooltipTitle = (\n            <div>\n                <div style={{ borderBottom: '1px solid silver' }}>{taxon.name}</div>\n                <div>{taxon.rank}</div>\n            </div>\n        );\n\n        return (\n            <Tooltip title={tooltipTitle} placement=\"right\">\n                <div\n                    className={classNames.join(' ')}\n                    key={this.props.taxon.id}\n                    onMouseEnter={this.onMouseEnter.bind(this)}\n                    onMouseLeave={this.onMouseLeave.bind(this)}\n                >\n                    {this.renderItem()}\n                </div>\n            </Tooltip>\n        );\n    }\n}\n","import DB, {\n    DBProps,\n    DBStatus,\n    DBStateNone,\n    DBStateLoading,\n    DBStateLoaded,\n    DBStateError,\n    DBStateReLoading\n} from '../lib/DB';\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { Taxon } from '../redux/store';\nimport { TaxonomyModel } from '../lib/model';\n\nexport type TaxonDBStateNone = DBStateNone;\nexport type TaxonDBStateLoading = DBStateLoading;\nexport type TaxonDBStateError = DBStateError;\n\nexport interface TaxonDBStateLoaded extends DBStateLoaded {\n    taxa: Array<Taxon>;\n    total: number;\n    page: number;\n    pageSize: number;\n}\n\nexport interface TaxonDBStateReLoading extends DBStateReLoading {\n    taxa: Array<Taxon>;\n    total: number;\n    page: number;\n    pageSize: number;\n}\n\nexport type TaxonDBState =\n    | TaxonDBStateNone\n    | TaxonDBStateLoading\n    | TaxonDBStateLoaded\n    | TaxonDBStateReLoading\n    | TaxonDBStateError;\n\nexport interface TaxonDBProps extends DBProps<TaxonDBState> {\n    token: string;\n    config: AppConfig;\n}\n\nexport default class TaxonDB extends DB<TaxonDBState> {\n    token: string;\n    serviceWizardURL: string;\n    constructor(props: TaxonDBProps) {\n        super(props);\n        this.token = props.token;\n        this.serviceWizardURL = props.config.services.ServiceWizard.url;\n    }\n    // Remember, pages are 1 based; offset is 0 based.\n    // async fetchTaxa(taxonID: TaxonID, page: number, pageSize: number) {\n    //     try {\n    //         this.set((state: TaxonDBState) => {\n    //             return {\n    //                 ...state,\n    //                 status: DBStatus.LOADING\n    //             };\n    //         });\n\n    //         const client = new TaxonomyModel({\n    //             token: this.token,\n    //             url: this.serviceWizardURL\n    //         });\n\n    //         const offset = (page - 1) * pageSize;\n    //         const limit = pageSize;\n\n    //         const [taxa, totalCount] = await client.getChildren(taxonID, {\n    //             offset,\n    //             limit\n    //         });\n    //         this.set((state: TaxonDBState) => {\n    //             return {\n    //                 ...state,\n    //                 status: DBStatus.LOADED,\n    //                 taxa,\n    //                 total: totalCount,\n    //                 page,\n    //                 pageSize\n    //             };\n    //         });\n    //     } catch (ex) {\n    //         console.error('ERROR', ex);\n    //         this.set((state: TaxonDBState) => {\n    //             return {\n    //                 status: DBStatus.ERROR,\n    //                 message: ex.message\n    //             };\n    //         });\n    //     }\n    // }\n\n    async fetchChildren({\n        taxonID,\n        page,\n        pageSize,\n        searchTerm\n    }: {\n        taxonID: string;\n        page: number;\n        pageSize: number;\n        searchTerm: string;\n    }) {\n        try {\n            this.set((state: TaxonDBState) => {\n                if (state.status === DBStatus.LOADED) {\n                    return {\n                        ...state,\n                        status: DBStatus.RELOADING\n                    };\n                } else {\n                    return {\n                        ...state,\n                        status: DBStatus.LOADING\n                    };\n                }\n            });\n\n            const client = new TaxonomyModel({\n                token: this.token,\n                url: this.serviceWizardURL\n            });\n\n            const offset = (page - 1) * pageSize;\n            const limit = pageSize;\n\n            const [taxa, totalCount] = await client.getChildren(taxonID, {\n                offset,\n                limit,\n                searchTerm\n            });\n            this.set((state: TaxonDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADED,\n                    taxa,\n                    total: totalCount,\n                    page,\n                    pageSize\n                };\n            });\n        } catch (ex) {\n            console.error('ERROR', ex);\n            this.set((state: TaxonDBState) => {\n                return {\n                    status: DBStatus.ERROR,\n                    message: ex.message\n                };\n            });\n        }\n    }\n}\n","import React from 'react';\nimport { Taxon, TaxonID } from './redux/store';\nimport './TaxonList.css';\nimport TaxonItem from './TaxonItem';\nimport { Empty } from 'antd';\n\nexport interface Props {\n    taxa: Array<Taxon>;\n    maxItems: number;\n    totalItems: number;\n    selectedTaxonID: string | null;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n}\n\ninterface State {}\n\nexport default class TaxonList extends React.Component<Props, State> {\n    selectTaxon(taxonID: TaxonID) {\n        this.props.selectTaxonID(taxonID);\n    }\n    navigateToTaxon(taxonID: TaxonID) {\n        this.props.navigateToTaxonID(taxonID);\n    }\n    renderItemsPlain() {\n        return this.props.taxa.map((taxon) => {\n            const isActive = this.props.selectedTaxonID === taxon.id;\n            return (\n                <TaxonItem\n                    taxon={taxon}\n                    isActive={isActive}\n                    selectTaxonID={this.selectTaxon.bind(this)}\n                    key={taxon.id}\n                    navigateToTaxonID={this.navigateToTaxon.bind(this)}\n                />\n            );\n        });\n    }\n    renderNoItems() {\n        return <Empty description=\"No Children\" image={Empty.PRESENTED_IMAGE_SIMPLE} />;\n    }\n    render() {\n        if (this.props.taxa.length === 0) {\n            return this.renderNoItems();\n        }\n        return this.renderItemsPlain();\n    }\n}\n","import React from 'react';\nimport { Pagination, Icon, Alert, Input, Spin } from 'antd';\nimport TaxonList from '../TaxonList';\nimport { TaxonID } from '../redux/store';\nimport TaxonDB, { TaxonDBState, TaxonDBStateError, TaxonDBStateLoaded, TaxonDBStateReLoading } from './TaxonChildrenDB';\nimport { DBStatus } from '../lib/DB';\nimport './index.css';\n\nconst DEFAULT_PAGE_SIZE = 10;\n\nexport interface Props {\n    db: TaxonDBState;\n    taxonID: TaxonID;\n    selectedTaxonID: TaxonID | null;\n    // taxa: Array<Taxon>;\n    // total: number;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n    fetchChildren: (taxonID: TaxonID, page: number, pageSize: number, searchTerm: string) => void;\n}\n\nexport interface State {}\n\nexport default class TaxonChildren extends React.Component<Props, State> {\n    searchTerm: string;\n    page: number;\n    pageSize: number | null;\n    constructor(props: Props) {\n        super(props);\n        this.searchTerm = '';\n        this.page = 1;\n        this.pageSize = null;\n    }\n    componentDidMount() {\n        this.props.fetchChildren(this.props.taxonID, 1, DEFAULT_PAGE_SIZE, '');\n    }\n    renderTaxaNone() {\n        return <div>None</div>;\n    }\n    renderTaxaLoading() {\n        return <Icon type=\"loading\" />;\n    }\n\n    renderTitleLoaded(db: TaxonDBStateLoaded | TaxonDBStateReLoading) {\n        if (db.total === 0) {\n            return <div className=\"Col-auto TaxonChildren-box-title\">No Children</div>;\n        }\n\n        const totalCount = Intl.NumberFormat('en-US', {\n            useGrouping: true\n        }).format(db.total);\n        const currentItem = (db.page - 1) * db.pageSize + 1;\n        const lastItem = currentItem + db.taxa.length - 1;\n\n        return (\n            <div className=\"Col-auto TaxonChildren-box-title\">\n                Children ({currentItem}-{lastItem} of {totalCount})\n            </div>\n        );\n    }\n\n    renderTitleReLoading(db: TaxonDBStateReLoading) {\n        return <Spin size=\"small\">{this.renderTitleLoaded(db)}</Spin>;\n    }\n\n    renderTitle() {\n        const db = this.props.db;\n        switch (db.status) {\n            case DBStatus.NONE:\n            case DBStatus.LOADING:\n                return <div>Loading...</div>;\n            case DBStatus.ERROR:\n                return <div>ERROR: {db.message}</div>;\n            case DBStatus.LOADED:\n                return this.renderTitleLoaded(db);\n            case DBStatus.RELOADING:\n                return this.renderTitleReLoading(db);\n        }\n    }\n    doSearch(term: string) {\n        // console.log('searching: ' + term);\n        this.searchTerm = term;\n        this.props.fetchChildren(this.props.taxonID, 1, this.pageSize || DEFAULT_PAGE_SIZE, term);\n    }\n    renderSearch() {\n        const disabled =\n            this.props.db.status !== DBStatus.LOADED ||\n            (this.props.db.total <= this.props.db.pageSize && !this.searchTerm);\n        return (\n            <div style={{ marginBottom: '4px' }}>\n                <Input.Search placeholder=\"Search Children\" onSearch={this.doSearch.bind(this)} disabled={disabled} />\n            </div>\n        );\n    }\n    renderTaxaLoaded(db: TaxonDBStateLoaded | TaxonDBStateReLoading) {\n        return (\n            <React.Fragment>\n                <TaxonList\n                    taxa={db.taxa}\n                    selectedTaxonID={this.props.selectedTaxonID}\n                    selectTaxonID={this.props.selectTaxonID}\n                    navigateToTaxonID={this.props.navigateToTaxonID}\n                    totalItems={db.total}\n                    maxItems={DEFAULT_PAGE_SIZE}\n                />\n            </React.Fragment>\n        );\n    }\n    renderTaxaReLoading(db: TaxonDBStateReLoading) {\n        return <Spin tip=\"Loading\">{this.renderTaxaLoaded(db)}</Spin>;\n    }\n    renderTaxaError(db: TaxonDBStateError) {\n        return <Alert type=\"error\" message={db.message} />;\n    }\n    renderTaxa() {\n        switch (this.props.db.status) {\n            case DBStatus.NONE:\n                return this.renderTaxaNone();\n            case DBStatus.LOADING:\n                return this.renderTaxaLoading();\n            case DBStatus.LOADED:\n                return this.renderTaxaLoaded(this.props.db);\n            case DBStatus.RELOADING:\n                return this.renderTaxaReLoading(this.props.db);\n            case DBStatus.ERROR:\n                return this.renderTaxaError(this.props.db);\n        }\n    }\n    changePage(page: number, pageSize: number | undefined) {\n        this.page = page;\n        this.pageSize = pageSize || DEFAULT_PAGE_SIZE;\n        this.props.fetchChildren(this.props.taxonID, this.page, this.pageSize, this.searchTerm);\n    }\n    renderPaginationNone() {\n        return <Pagination size=\"small\" showLessItems={true} hideOnSinglePage={false} />;\n    }\n    renderPaginationLoading() {\n        return <Pagination size=\"small\" showLessItems={true} hideOnSinglePage={false} />;\n    }\n    renderPaginationError() {\n        return <Pagination size=\"small\" showLessItems={true} hideOnSinglePage={false} />;\n    }\n    renderPaginationLoaded(db: TaxonDBStateLoaded) {\n        return (\n            <Pagination\n                size=\"small\"\n                defaultPageSize={db.pageSize}\n                // defaultCurrent={1}\n                showLessItems={true}\n                current={db.page}\n                hideOnSinglePage={false}\n                total={db.total}\n                onChange={this.changePage.bind(this)}\n            />\n        );\n    }\n    renderPaginationReLoading(db: TaxonDBStateReLoading) {\n        return (\n            <Pagination\n                size=\"small\"\n                defaultPageSize={db.pageSize}\n                // defaultCurrent={1}\n                showLessItems={true}\n                current={db.page}\n                hideOnSinglePage={false}\n                total={db.total}\n                disabled={true}\n            />\n        );\n    }\n    renderPagination() {\n        const db = this.props.db;\n        switch (db.status) {\n            case DBStatus.NONE:\n                return this.renderPaginationNone();\n            case DBStatus.LOADING:\n                return this.renderPaginationLoading();\n            case DBStatus.ERROR:\n                return this.renderPaginationError();\n            case DBStatus.LOADED:\n                return this.renderPaginationLoaded(db);\n            case DBStatus.RELOADING:\n                return this.renderPaginationReLoading(db);\n        }\n    }\n    renderChildren() {\n        return (\n            <div>\n                {this.renderTitle()}\n                {this.renderSearch()}\n                {this.renderPagination()}\n                {this.renderTaxa()}\n            </div>\n        );\n    }\n\n    render() {\n        return this.renderChildren();\n    }\n}\n","import React from 'react';\nimport TaxonDB from './TaxonChildrenDB';\nimport { DBStatus } from '../lib/DB';\n\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport TaxonChildren from './TaxonChildren';\nimport { TaxonID } from '../redux/store';\n\nexport interface Props {\n    token: string;\n    config: AppConfig;\n    taxonID: TaxonID;\n    selectedTaxonID: TaxonID | null;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n}\n\ninterface State {}\n\nexport default class Data extends React.Component<Props, State> {\n    db: TaxonDB;\n    constructor(props: Props) {\n        super(props);\n        this.db = new TaxonDB({\n            onUpdate: () => {\n                this.forceUpdate();\n            },\n            initialData: {\n                status: DBStatus.NONE\n            },\n            token: props.token,\n            config: props.config\n        });\n    }\n\n    fetchChildren(taxonID: TaxonID, page: number, pageSize: number, searchTerm: string) {\n        return this.db.fetchChildren({ taxonID, page, pageSize, searchTerm });\n    }\n\n    render() {\n        return (\n            <TaxonChildren\n                db={this.db.get()}\n                taxonID={this.props.taxonID}\n                selectedTaxonID={this.props.selectedTaxonID}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n                fetchChildren={this.fetchChildren.bind(this)}\n            />\n        );\n    }\n}\n","import { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { StoreState } from '../../../../redux/store';\nimport DataComponent from './data';\nimport { connect } from 'react-redux';\n\nexport interface OwnProps {}\n\nexport interface StateProps {\n    token: string;\n    config: AppConfig;\n}\n\nexport interface DispatchProps {}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        app: { config }\n    } = state;\n    if (!userAuthorization) {\n        throw new Error('Invalid state - no user authorization');\n    }\n    return {\n        token: userAuthorization.token,\n        config\n    };\n}\n\nfunction mapDispatchToProps() {\n    return {};\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(DataComponent);\n","import DB, { DBProps, DBStatus, DBStateNone, DBStateLoading, DBStateLoaded, DBStateError } from '../lib/DB';\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { Taxon, TaxonID } from '../redux/store';\nimport { TaxonomyModel } from '../lib/model';\n\nexport type LineageDBStateNone = DBStateNone;\nexport type LineageDBStateLoading = DBStateLoading;\nexport type LineageDBStateError = DBStateError;\n\nexport interface LineageDBStateLoaded extends DBStateLoaded {\n    lineage: Array<Taxon>;\n}\n\nexport type LineageDBState = LineageDBStateNone | LineageDBStateLoading | LineageDBStateLoaded | LineageDBStateError;\n\nexport interface LineageDBProps extends DBProps<LineageDBState> {\n    token: string;\n    config: AppConfig;\n}\n\n// TODO: make props part of generic\nexport default class LineageDB extends DB<LineageDBState> {\n    props: LineageDBProps;\n    constructor(props: LineageDBProps) {\n        super(props);\n        this.props = props;\n    }\n    async getLineage(taxonID: TaxonID) {\n        try {\n            this.set((state: LineageDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADING\n                };\n            });\n\n            const client = new TaxonomyModel({\n                token: this.props.token,\n                url: this.props.config.services.ServiceWizard.url\n            });\n\n            const lineage = await client.getLineage(taxonID);\n            this.set((state: LineageDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADED,\n                    lineage\n                };\n            });\n        } catch (ex) {\n            console.error('ERROR', ex);\n            this.set((state: LineageDBState) => {\n                return {\n                    status: DBStatus.ERROR,\n                    message: ex.message\n                };\n            });\n        }\n    }\n}\n","import React from 'react';\nimport { Taxon, TaxonID } from '../redux/store';\nimport TaxonList from '../TaxonList';\n\nexport interface Props {\n    lineage: Array<Taxon>;\n    selectedTaxonID: TaxonID;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n}\n\ninterface State {}\n\nexport default class Lineage extends React.Component<Props, State> {\n    render() {\n        return (\n            <TaxonList\n                taxa={this.props.lineage}\n                selectedTaxonID={this.props.selectedTaxonID}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n                totalItems={this.props.lineage.length}\n                maxItems={10}\n            />\n        );\n    }\n}\n","import React from 'react';\nimport LineageDB, { LineageDBStateLoaded } from './LineageDB';\nimport { DBStatus, DBStateError } from '../lib/DB';\n\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport Lineage from './Lineage';\nimport { TaxonID } from '../redux/store';\nimport { Icon, Alert } from 'antd';\n\nexport interface Props {\n    token: string;\n    config: AppConfig;\n    taxonID: TaxonID;\n    selectedTaxonID: TaxonID;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n}\n\ninterface State {}\n\nexport default class Data extends React.Component<Props, State> {\n    db: LineageDB;\n    constructor(props: Props) {\n        super(props);\n        this.db = new LineageDB({\n            onUpdate: () => {\n                this.forceUpdate();\n            },\n            initialData: {\n                status: DBStatus.NONE\n            },\n            token: props.token,\n            config: props.config\n        });\n    }\n\n    renderLoading() {\n        return <Icon type=\"loading\" />;\n    }\n\n    renderError(db: DBStateError) {\n        return <Alert type=\"error\" message={db.message} />;\n    }\n\n    renderLoaded(db: LineageDBStateLoaded) {\n        return (\n            <Lineage\n                lineage={db.lineage}\n                selectedTaxonID={this.props.selectedTaxonID}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n            />\n        );\n    }\n\n    render() {\n        const db = this.db.get();\n        switch (db.status) {\n            case DBStatus.NONE:\n                this.db.getLineage(this.props.taxonID);\n                return this.renderLoading();\n            case DBStatus.LOADING:\n                return this.renderLoading();\n            case DBStatus.ERROR:\n                return this.renderError(db);\n            case DBStatus.LOADED:\n                return this.renderLoaded(db);\n        }\n    }\n}\n","import { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { StoreState } from '../../../../redux/store';\nimport DataComponent from './data';\nimport { connect } from 'react-redux';\n\nexport interface OwnProps {}\n\nexport interface StateProps {\n    token: string;\n    config: AppConfig;\n}\n\nexport interface DispatchProps {}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        app: { config }\n    } = state;\n    if (!userAuthorization) {\n        throw new Error('Invalid state - no user authorization');\n    }\n    return {\n        token: userAuthorization.token,\n        config\n    };\n}\n\nfunction mapDispatchToProps() {\n    return {};\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(DataComponent);\n","import React from 'react';\nimport { Taxon, TaxonID } from './redux/store';\nimport { SelectParam } from 'antd/lib/menu';\nimport './LineageNavigator.css';\nimport TaxonItem from './TaxonItem';\nimport TaxonChildren from './taxonChildren';\nimport Lineage from './lineage';\n\nexport interface LineageProps {\n    selectedTaxon: Taxon;\n    targetTaxon: Taxon;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n}\n\ninterface LineageState {}\n\nexport default class LineageNavigator extends React.Component<LineageProps, LineageState> {\n    onClick(taxonId: string) {\n        this.props.selectTaxonID(taxonId);\n        // alert('navigate to ' + taxonId);\n    }\n\n    menuSelected(param: SelectParam) {\n        this.props.selectTaxonID(param.key);\n        // alert('navigate to ' + param.key);\n    }\n\n    clickTaxon(taxon: Taxon) {\n        this.props.selectTaxonID(taxon.id);\n    }\n\n    renderLineage() {\n        return (\n            <Lineage\n                taxonID={this.props.targetTaxon.id}\n                selectedTaxonID={this.props.selectedTaxon.id}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n            />\n        );\n        // return 'disabled';\n    }\n\n    renderChildrenCount(count: number) {\n        if (count === 0) {\n            return <div className=\"\">No children</div>;\n        }\n        if (count === 1) {\n            return <div>One child</div>;\n        }\n        return (\n            <div>\n                {Intl.NumberFormat('en-US', {\n                    useGrouping: true\n                }).format(count)}{' '}\n                children\n            </div>\n        );\n    }\n\n    renderChildren() {\n        let selectedId;\n        if (this.props.selectedTaxon) {\n            selectedId = this.props.selectedTaxon.id;\n        } else {\n            selectedId = null;\n        }\n\n        return (\n            <TaxonChildren\n                taxonID={this.props.targetTaxon.id}\n                selectedTaxonID={selectedId}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n            />\n        );\n    }\n\n    // renderChildrenxscrolling() {\n    //     let selectedId;\n    //     if (this.props.selectedTaxon) {\n    //         selectedId = this.props.selectedTaxon.id;\n    //     } else {\n    //         selectedId = null;\n    //     }\n\n    //     return (\n    //         <div className=\"scrolling\">\n    //             <TaxonList\n    //                 taxa={this.props.offspring}\n    //                 selectedTaxonID={selectedId}\n    //                 selectTaxonID={this.props.selectTaxonID}\n    //                 navigateToTaxonID={this.props.navigateToTaxonID}\n    //                 totalItems={this.props.totalOffspring}\n    //                 maxItems={10}\n    //             />\n    //         </div>\n    //     );\n    // }\n\n    renderTargetTaxon() {\n        const isActive =\n            (this.props.selectedTaxon && this.props.selectedTaxon.id === this.props.targetTaxon.id) || false;\n\n        return (\n            <TaxonItem\n                taxon={this.props.targetTaxon}\n                isActive={isActive}\n                selectTaxonID={this.props.selectTaxonID}\n                navigateToTaxonID={this.props.navigateToTaxonID}\n            />\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"Col scrollable\">\n                <div className=\"Col-auto Lineage-box\">\n                    <div className=\"Lineage-box-title\">Lineage</div>\n                    {this.renderLineage()}\n                </div>\n                <div className=\"Col-auto Lineage-box Lineage-target-taxon\">{this.renderTargetTaxon()}</div>\n                <div className=\"Col-auto scrollable Lineage-box\">{this.renderChildren()}</div>\n            </div>\n        );\n    }\n}\n","import React, { CSSProperties } from 'react';\nimport { Taxon } from './redux/store';\n\nexport interface Props {\n    taxon: Taxon;\n}\n\nexport interface State {}\n\nexport default class TaxonSummary extends React.Component<Props, State> {\n    render() {\n        let nameStyle: CSSProperties = {};\n        if (this.props.taxon.rank === 'species') {\n            nameStyle = { fontStyle: 'italic' };\n        }\n        return (\n            <div className=\"InfoTable\">\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\" style={{ width: '5em' }}>\n                        Name\n                    </div>\n                    <div className=\"InfoTable-dataCol\" style={nameStyle}>\n                        {this.props.taxon.name}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\">\n                    <div className=\"InfoTable-labelCol\" style={{ width: '5em' }}>\n                        Rank\n                    </div>\n                    <div className=\"InfoTable-dataCol\">{this.props.taxon.rank}</div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport { NCBITaxon, TaxonAlias } from '../redux/store';\nimport { Table } from 'antd';\nimport geneticCodes from '../data/geneticCodes.json';\n\n// as Array<[number, string]>\n\ntype GeneticCodes = Array<[number, string]>;\n\nfunction ensureGeneticCodes(geneticCodes: any): GeneticCodes {\n    if (!(geneticCodes instanceof Array)) {\n        throw new Error('Invalid genetic codes file!');\n    }\n\n    return geneticCodes.map(([id, name]) => {\n        if (typeof id !== 'number') {\n            throw new Error('Invalid genetic code id in file');\n        }\n        if (typeof name !== 'string') {\n            throw new Error('Invalid genetic code label in file');\n        }\n        return [id, name];\n    });\n}\n\nconst gc = ensureGeneticCodes(geneticCodes);\n\nconst geneticCodesMap: Map<number, string> = gc.reduce((geneticCodesMap, [id, label]) => {\n    geneticCodesMap.set(id, label);\n    return geneticCodesMap;\n}, new Map<number, string>());\n\nexport interface TaxonDetailProps {\n    taxon: NCBITaxon;\n}\n\ninterface TaxonDetailState {}\n\nexport default class TaxonDetailNCBI extends React.Component<TaxonDetailProps, TaxonDetailState> {\n    renderAliases() {\n        const aliasNameSorter = (a: TaxonAlias, b: TaxonAlias) => {\n            return stringSorter(a.name, b.name);\n        };\n\n        const aliasCategorySorter = (a: TaxonAlias, b: TaxonAlias) => {\n            return stringSorter(a.category, b.category);\n        };\n\n        const stringSorter = (a: string, b: string) => {\n            const fixedA = a.replace(/^[\"']/, '');\n            const fixedB = b.replace(/^[\"']/, '');\n            return fixedA.localeCompare(fixedB);\n        };\n        return (\n            <Table\n                dataSource={this.props.taxon.aliases}\n                className=\"KBaseAntdOverride-remove-table-border\"\n                size=\"small\"\n                // pagination={{ position: 'top' }}\n                pagination={false}\n                scroll={{ y: '25em' }}\n                rowKey=\"name\"\n                bordered={false}\n            >\n                <Table.Column\n                    title=\"Name\"\n                    dataIndex=\"name\"\n                    key=\"name\"\n                    defaultSortOrder=\"ascend\"\n                    sorter={aliasNameSorter}\n                />\n                <Table.Column\n                    title=\"Category\"\n                    dataIndex=\"category\"\n                    key=\"category\"\n                    width=\"20em\"\n                    sorter={aliasCategorySorter}\n                />\n            </Table>\n        );\n    }\n\n    renderTaxonDetail() {\n        const width = '8em';\n        let nameStyle: React.CSSProperties = {};\n        if (this.props.taxon.rank === 'species') {\n            nameStyle.fontStyle = 'italic';\n        }\n        return (\n            <div className=\"InfoTable\">\n                <div className=\"InfoTable-row\" key=\"name\">\n                    <div className=\"InfoTable-labelCol\" style={{ width }}>\n                        Name\n                    </div>\n                    <div className=\"InfoTable-dataCol\" style={nameStyle}>\n                        {this.props.taxon.name}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\" key=\"rank\">\n                    <div className=\"InfoTable-labelCol\" style={{ width }}>\n                        Rank\n                    </div>\n                    <div className=\"InfoTable-dataCol\">{this.props.taxon.rank}</div>\n                </div>\n                <div className=\"InfoTable-row\" key=\"ncbiid\">\n                    <div className=\"InfoTable-labelCol\" style={{ width }}>\n                        NCBI ID\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        <a\n                            href={`https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=info&id=${\n                                this.props.taxon.ncbiID\n                            }`}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                        >\n                            {this.props.taxon.ncbiID}\n                        </a>\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\" key=\"genetic-code\">\n                    <div className=\"InfoTable-labelCol\" style={{ width }}>\n                        Genetic Code\n                    </div>\n                    <div className=\"InfoTable-dataCol\">\n                        {this.props.taxon.geneticCode} -{' '}\n                        {geneticCodesMap.get(this.props.taxon.geneticCode) || 'Unknown'}\n                    </div>\n                </div>\n                <div className=\"InfoTable-row\" key=\"aliases\">\n                    <div className=\"InfoTable-labelCol\" style={{ width }}>\n                        Aliases\n                    </div>\n                    <div className=\"InfoTable-dataCol\">{this.renderAliases()}</div>\n                </div>\n            </div>\n        );\n    }\n\n    render() {\n        return <div>{this.renderTaxonDetail()}</div>;\n    }\n}\n","import React from 'react';\nimport { Taxon, TaxonomySource } from '../redux/store';\nimport TaxonDetailNCBI from './TaxonDetailNCBI';\nimport { Alert } from 'antd';\n\nexport interface TaxonDetailProps {\n    taxon: Taxon;\n}\n\ninterface TaxonDetailState {}\n\nexport default class TaxonDetail extends React.Component<TaxonDetailProps, TaxonDetailState> {\n    render() {\n        switch (this.props.taxon.type) {\n            case TaxonomySource.NCBI:\n                return <TaxonDetailNCBI taxon={this.props.taxon} />;\n            default:\n                return <Alert type=\"error\" message=\"This taxon type is not suppported\" />;\n        }\n    }\n}\n","export function getProp<T>(obj: object, propPath: string | Array<string>, defaultValue: any): T {\n    if (typeof propPath === 'string') {\n        propPath = propPath.split('.');\n    } else if (!(propPath instanceof Array)) {\n        throw new TypeError('Invalid type for key: ' + typeof propPath);\n    }\n    let temp: any = obj;\n    for (let i = 0; i < propPath.length; i += 1) {\n        if (temp === undefined || typeof temp !== 'object' || temp === null) {\n            return defaultValue;\n        }\n        temp = temp[propPath[i]];\n    }\n    if (temp === undefined) {\n        return defaultValue;\n    }\n    return temp;\n}\n\nexport function hasProp(obj: object, propPath: string | Array<string>): boolean {\n    if (typeof propPath === 'string') {\n        propPath = propPath.split('.');\n    } else if (!(propPath instanceof Array)) {\n        throw new TypeError('Invalid type for key: ' + typeof propPath);\n    }\n    let temp: any = obj;\n    for (let i = 0; i < propPath.length; i += 1) {\n        if (temp === undefined || typeof temp !== 'object' || temp === null) {\n            return false;\n        }\n        temp = temp[propPath[i]];\n    }\n    if (temp === undefined) {\n        return false;\n    }\n    return true;\n}\n\nexport function setProp(obj: object, propPath: string | Array<string>, value: any) {\n    if (typeof propPath === 'string') {\n        propPath = propPath.split('.');\n    } else if (!(propPath instanceof Array)) {\n        throw new TypeError('Invalid type for key: ' + typeof propPath);\n    }\n    if (propPath.length === 0) {\n        return;\n    }\n    // pop off the last property for setting at the end.\n    const propKey = propPath[propPath.length - 1];\n    let key;\n    // Walk the path, creating empty objects if need be.\n    let temp: any = obj;\n    for (let i = 0; i < propPath.length - 1; i += 1) {\n        key = propPath[i];\n        if (temp[key] === undefined) {\n            temp[key] = {};\n        }\n        obj = temp[key];\n    }\n    // Finally set the property.\n    temp[propKey] = value;\n    return value;\n}\n\nexport function incrProp(obj: object, propPath: string | Array<string>, increment: number): number | undefined {\n    if (typeof propPath === 'string') {\n        propPath = propPath.split('.');\n    } else if (!(propPath instanceof Array)) {\n        throw new TypeError('Invalid type for key: ' + typeof propPath);\n    }\n    if (propPath.length === 0) {\n        return;\n    }\n    increment = increment === undefined ? 1 : increment;\n    const propKey = propPath[propPath.length - 1];\n    let temp: any = obj;\n    for (let i = 0; i < propPath.length - 1; i += 1) {\n        const key = propPath[i];\n        if (temp[key] === undefined) {\n            temp[key] = {};\n        }\n        temp = temp[key];\n    }\n    if (temp[propKey] === undefined) {\n        temp[propKey] = increment;\n    } else {\n        if (typeof temp[propKey] === 'number') {\n            temp[propKey] += increment;\n        } else {\n            throw new Error('Can only increment a number');\n        }\n    }\n    return temp[propKey];\n}\n\nexport function deleteProp(obj: object, propPath: string | Array<string>) {\n    if (typeof propPath === 'string') {\n        propPath = propPath.split('.');\n    } else if (!(propPath instanceof Array)) {\n        throw new TypeError('Invalid type for key: ' + typeof propPath);\n    }\n    if (propPath.length === 0) {\n        return false;\n    }\n    const propKey = propPath[propPath.length - 1];\n    let temp: any = obj;\n    for (let i = 0; i < propPath.length - 1; i += 1) {\n        const key = propPath[i];\n        if (temp[key] === undefined) {\n            // for idempotency, and utility, do not throw error if\n            // the key doesn't exist.\n            return false;\n        }\n        obj = temp[key];\n    }\n    if (temp[propKey] === undefined) {\n        return false;\n    }\n    delete temp[propKey];\n    return true;\n}\n\n// class Props {\n//     constructor(config = {}) {\n//         this.obj = config.data || {};\n//     }\n\n//     getItem(props, defaultValue) {\n//         return getProp(this.obj, props, defaultValue);\n//     }\n\n//     hasItem(propPath) {\n//         return hasProp(this.obj, propPath);\n\n//     }\n\n//     setItem(path, value) {\n//         return setProp(this.obj, path, value);\n//     }\n\n//     incrItem(path, increment) {\n//         return incrProp(this.obj, path, increment);\n//     }\n\n//     deleteItem(path) {\n//         return deleteProp(this.obj, path);\n//     }\n\n//     getRaw() {\n//         return this.obj;\n//     }\n// }\n\n// return Object.freeze({ Props, getProp, hasProp, setProp, incrProp, deleteProp });\n","import React from 'react';\n\nimport WikipediaClient, { WikipediaInfo } from './landingPages/taxonomy/lib/Wikipedia';\nimport marked from 'marked';\nimport { Icon, Alert, Tooltip } from 'antd';\nimport Loading from './Loading';\nimport './Wikipedia.css';\n\nexport interface WikipediaProps {\n    term: string;\n}\n\nenum AsyncComponentLoadingState {\n    NONE,\n    LOADING,\n    LOADED,\n    ERROR\n}\n\ninterface StateNone {\n    state: AsyncComponentLoadingState.NONE;\n}\n\ninterface StateLoading {\n    state: AsyncComponentLoadingState.LOADING;\n}\n\ninterface StateLoaded {\n    state: AsyncComponentLoadingState.LOADED;\n    wikipediaInfo: WikipediaInfo;\n}\n\ninterface StateError {\n    state: AsyncComponentLoadingState.ERROR;\n    error: string;\n}\n\ntype WikipediaState = StateNone | StateLoading | StateLoaded | StateError;\n\nexport default class Wikipedia extends React.Component<WikipediaProps, WikipediaState> {\n    wikipediaClient: WikipediaClient;\n    canceled: boolean;\n    constructor(props: WikipediaProps) {\n        super(props);\n        this.wikipediaClient = new WikipediaClient();\n        this.canceled = false;\n        this.state = {\n            state: AsyncComponentLoadingState.NONE\n        };\n    }\n\n    componentWillUnmount() {\n        this.canceled = true;\n        // this.state = {\n        //     state: AsyncComponentLoadingState.CANCELED\n        // };\n    }\n\n    renderArticle(wikipediaInfo: WikipediaInfo) {\n        const content = marked(wikipediaInfo.introText);\n        return <div style={{ overflow: 'auto' }} dangerouslySetInnerHTML={{ __html: content }} />;\n    }\n\n    renderImage(wikipediaInfo: WikipediaInfo) {\n        if (!wikipediaInfo.imageUrl) {\n            return (\n                <div className=\"Wikipedia-empty-image\">\n                    <div className=\"-content\">Image not found</div>\n                </div>\n            );\n        }\n        return (\n            <div>\n                <img src={wikipediaInfo.imageUrl} style={{ width: '100%' }} alt={`${this.props.term}`} />\n            </div>\n        );\n    }\n\n    renderMatch(wikipediaInfo: WikipediaInfo) {\n        if (wikipediaInfo.exactMatch) {\n            const message = (\n                <React.Fragment>\n                    <Icon type=\"check\" style={{ color: 'green' }} /> Exact match on \"\n                    {wikipediaInfo.matchingTerms.join(' ')}\"\n                </React.Fragment>\n            );\n            return <Alert type=\"success\" message={message} />;\n        } else {\n            const message = (\n                <React.Fragment>\n                    <Icon type=\"warning\" style={{ color: 'orange' }} /> Inexact match on: \"\n                    {wikipediaInfo.matchingTerms.join(' ')}\"\n                </React.Fragment>\n            );\n            return <Alert type=\"warning\" message={message} />;\n        }\n    }\n\n    renderWikipediaLogoCredit() {\n        return (\n            <div>\n                <div style={{ borderBottom: '1px solid gray' }}>Link to the original Wikipedia entry</div>\n                <div style={{ fontSize: '80%' }}>\n                    <p style={{ textAlign: 'center' }}>\n                        credit:\n                        <a\n                            href=\"https://creativecommons.org/licenses/by-sa/3.0/\"\n                            title=\"Creative Commons Attribution-ShareAlike 3.0\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                        >\n                            CC BY-SA 3.0\n                        </a>\n                        <a\n                            href=\"https://en.wikipedia.org/w/index.php?curid=33285413\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                        >\n                            Link\n                        </a>\n                    </p>\n                </div>\n            </div>\n        );\n    }\n\n    renderWikipediaInfo(wikipediaInfo: WikipediaInfo) {\n        return (\n            <div className=\"Row scrollable\">\n                <div className=\"Col Col-grow-2 scrollable\">\n                    <div style={{ display: 'flex', flexDirection: 'row', marginBottom: '10px' }}>\n                        <div style={{ flex: '1 1 0px' }}>{this.renderMatch(wikipediaInfo)}</div>\n                        <div style={{ flex: '0 0 auto', alignSelf: 'center', marginLeft: '10px' }}>\n                            <div style={{ height: '32px', textAlign: 'center' }}>\n                                <Tooltip title={this.renderWikipediaLogoCredit()}>\n                                    <a href={wikipediaInfo.pageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                                        <img\n                                            src=\"images/wikipedia-logo.svg\"\n                                            style={{ height: '100%' }}\n                                            alt=\"Wikipedia Logo\"\n                                        />\n                                    </a>\n                                </Tooltip>\n                            </div>\n                            <div />\n                        </div>\n                    </div>\n                    <div\n                        className=\"scrollable\"\n                        style={{ flex: '2 1 0px', paddingRight: '4px', marginRight: '4px', overflowY: 'auto' }}\n                    >\n                        {this.renderArticle(wikipediaInfo)}\n                    </div>\n                </div>\n\n                <div className=\"Col Col-grow-1\" style={{ flex: '1 1 0px', marginLeft: '10px' }}>\n                    {this.renderImage(wikipediaInfo)}\n                </div>\n            </div>\n        );\n    }\n\n    updateInfo() {\n        const wikipediaClient = new WikipediaClient();\n        const { term } = this.props;\n        this.setState({\n            state: AsyncComponentLoadingState.LOADING\n        });\n        wikipediaClient\n            .findTerm(term)\n            .then((wikipediaInfo) => {\n                if (this.canceled) {\n                    return;\n                }\n                this.setState({\n                    state: AsyncComponentLoadingState.LOADED,\n                    wikipediaInfo\n                });\n            })\n            .catch((err) => {\n                if (this.canceled) {\n                    return;\n                }\n                return this.setState({\n                    state: AsyncComponentLoadingState.ERROR,\n                    error: err.message\n                });\n            });\n    }\n\n    componentDidMount() {\n        this.updateInfo();\n    }\n\n    componentDidUpdate(props: WikipediaProps, state: WikipediaState) {\n        if (props.term !== this.props.term) {\n            this.updateInfo();\n        }\n    }\n\n    renderNone() {\n        return <div />;\n    }\n\n    renderLoading() {\n        return <Loading message=\"Searching Wikipedia...\" />;\n    }\n\n    renderLoaded(state: StateLoaded) {\n        return this.renderWikipediaInfo(state.wikipediaInfo);\n    }\n\n    renderError(state: StateError) {\n        return <Alert type=\"error\" message={state.error} />;\n    }\n\n    render() {\n        if (this.canceled) {\n            return;\n        }\n        switch (this.state.state) {\n            case AsyncComponentLoadingState.NONE:\n                return this.renderNone();\n            case AsyncComponentLoadingState.LOADING:\n                return this.renderLoading();\n            case AsyncComponentLoadingState.LOADED:\n                return this.renderLoaded(this.state);\n            case AsyncComponentLoadingState.ERROR:\n                return this.renderError(this.state);\n        }\n    }\n}\n","import * as props from './props';\n\nexport interface WikipediaInfo {\n    imageUrl: string;\n    pageUrl: string;\n    introText: string;\n    title: string;\n    pageId: number;\n    exactMatch: boolean;\n    matchingTerms: Array<string>;\n}\n\ninterface WikipediaParse {\n    headhtml: Map<string, string>;\n    pageid: number;\n    redirects: Array<string>;\n    text: Map<string, string>;\n    title: string;\n}\n\nclass NotFound extends Error {\n    constructor(message: string) {\n        super(message);\n\n        this.name = 'NotFound';\n    }\n}\n\nconst WIKIPEDIA_API_URL = 'https://en.wikipedia.org/w/api.php';\nconst IMAGE_SIZE = 500;\n\nexport default class Wikipedia {\n    scrubTerm(proposedTerm: string): string {\n        // convervatively, remove all non-alpha characters\n        const chars = proposedTerm.split('');\n        const validChar = /[\\w \\s]/;\n        const newChars = chars.filter((char) => {\n            if (validChar.exec(char)) {\n                return true;\n            }\n            return false;\n        });\n        return newChars.join('');\n    }\n\n    async findTerm(term: string): Promise<WikipediaInfo> {\n        if (!term) {\n            throw new Error('Empty term passed');\n        }\n        const lookupTerm = this.scrubTerm(term);\n        return this.getWikipediaInfo(lookupTerm).then(\n            ({ imageUrl, pageUrl, introText, title, pageId, matchingTerms, exactMatch }) => {\n                // this.imageUrl(imageUrl);\n                // this.pageUrl(url);\n                const fixedIntroText = introText\n                    .replace(/====/g, '####')\n                    .replace(/===/g, '###')\n                    .replace(/==/g, '##')\n                    .replace(/\\n/g, '  \\n');\n\n                return { imageUrl, pageUrl, introText: fixedIntroText, title, pageId, matchingTerms, exactMatch };\n            }\n        );\n    }\n\n    async getWikipediaInfo(term: string): Promise<WikipediaInfo> {\n        return this.getPage(term).then(\n            ({\n                wikiResponse,\n                matchingTerms,\n                exactMatch\n            }: {\n                wikiResponse: any;\n                matchingTerms: Array<string>;\n                exactMatch: boolean;\n            }) => {\n                // this.imageCaption(wikiResponse.parse.title);\n                return Promise.all([\n                    this.getImage({ size: IMAGE_SIZE, pageId: wikiResponse.parse.pageid }),\n                    this.getPageInfo({ pageId: wikiResponse.parse.pageid })\n                ]).then(([imageUrl, pageInfo]) => {\n                    return {\n                        imageUrl: imageUrl,\n                        pageUrl: pageInfo.url,\n                        introText: pageInfo.introText,\n                        title: wikiResponse.parse.title,\n                        pageId: wikiResponse.parse.pageid,\n                        matchingTerms,\n                        exactMatch\n                    };\n                });\n            }\n        );\n    }\n\n    // see: https://www.mediawiki.org/wiki/API:Main_page\n    // https://en.wikipedia.org/w/api.php?action=help&modules=parse\n    async getPage(term: string): Promise<{ wikiResponse: any; matchingTerms: Array<string>; exactMatch: boolean }> {\n        const terms = term.split(/\\s+/);\n        let matchingTerms: Array<string>;\n        let exactMatch = true;\n        return new Promise((resolve, reject) => {\n            const fetchPage = (terms: Array<string>) => {\n                if (terms.length === 0) {\n                    reject(new NotFound('No Wikipedia page found matching \"' + term + '\"'));\n                    // resolve(null);\n                }\n                // const http = new HttpClient.HttpClient();\n                // const header = new HttpClient.HttpHeader({\n                //     accept: 'application/json'\n                // });\n                const apiUrl = new URL(WIKIPEDIA_API_URL);\n                const query = apiUrl.searchParams;\n                query.set('action', 'parse');\n                query.set('format', 'json');\n                query.set('prop', 'text|headhtml');\n                query.set('section', '0');\n                query.set('redirects', '');\n                query.set('page', terms.join(' '));\n                const headers = {\n                    accept: 'application/json'\n                };\n                // must set this to enable cors\n                query.set('origin', '*');\n                fetch(apiUrl.toString(), {\n                    method: 'GET',\n                    headers\n                })\n                    .then((result) => {\n                        switch (result.status) {\n                            case 200:\n                                try {\n                                    return result.json().then((wikiResponse) => {\n                                        if (wikiResponse.error) {\n                                            if (wikiResponse.error.code === 'missingtitle') {\n                                                terms.pop();\n                                                exactMatch = false;\n                                                fetchPage(terms);\n                                                return null;\n                                            } else {\n                                                console.error('wikipedia api error', wikiResponse);\n                                                reject(new Error('Wikipedia api error: ' + wikiResponse.error.code));\n                                            }\n                                        } else {\n                                            matchingTerms = terms;\n                                            resolve({\n                                                wikiResponse,\n                                                matchingTerms,\n                                                exactMatch\n                                            });\n                                        }\n                                    });\n                                } catch (ex) {\n                                    reject(new Error('Error parsing wikipedia response: ' + ex.message));\n                                }\n                                break;\n                            default:\n                                const message = 'Unexpected response from wikipedia api: ' + result.status;\n                                console.error(message, result);\n                                reject(new Error(message));\n                        }\n                    })\n                    .catch((err) => {\n                        reject(err);\n                    });\n            };\n            fetchPage(terms);\n        });\n    }\n\n    async getPageInfo({ pageId }: { pageId: string }): Promise<any> {\n        const apiURL = new URL(WIKIPEDIA_API_URL);\n        const query = apiURL.searchParams;\n        query.set('action', 'query');\n        query.set('pageids', pageId);\n        query.set('prop', 'info|extracts');\n        query.set('explaintext', 'true');\n        query.set('inprop', 'url');\n        query.set('origin', '*');\n        query.set('format', 'json');\n\n        // const http = new HttpClient.HttpClient();\n        return fetch(apiURL.toString(), {\n            method: 'GET'\n        }).then((result) => {\n            switch (result.status) {\n                case 200:\n                    try {\n                        return result.json().then((wikiResponse) => {\n                            return {\n                                url: props.getProp<string>(\n                                    wikiResponse,\n                                    ['query', 'pages', String(pageId), 'fullurl'],\n                                    null\n                                ),\n                                introText: props.getProp<string>(\n                                    wikiResponse,\n                                    ['query', 'pages', String(pageId), 'extract'],\n                                    null\n                                )\n                            };\n                        });\n                    } catch (ex) {\n                        console.error('error getting page info', ex.message);\n                        throw ex;\n                    }\n                default:\n                    var message = 'Unexpected response from wikipedia api: ' + result.status;\n                    console.error(message, result);\n                    throw new Error(message);\n            }\n        });\n    }\n\n    async getImage({ size, pageId }: { size: number; pageId: number }): Promise<string> {\n        const apiURL = new URL(WIKIPEDIA_API_URL);\n        const query = apiURL.searchParams;\n        query.set('action', 'query');\n        query.set('format', 'json');\n        query.set('prop', 'pageimages');\n        query.set('pithumbsize', String(size));\n        query.set('pageids', String(pageId));\n        query.set('origin', '*');\n        const headers = {\n            accept: 'application/json'\n        };\n\n        return fetch(apiURL.toString(), {\n            method: 'GET',\n            headers\n        })\n            .then((result) => {\n                switch (result.status) {\n                    case 200:\n                        try {\n                            return result.json().then((wikiResponse) => {\n                                return props.getProp<string>(\n                                    wikiResponse,\n                                    ['query', 'pages', String(pageId), 'thumbnail', 'source'],\n                                    null\n                                );\n                            });\n                        } catch (ex) {\n                            throw new Error('Error parsing wikipedia response: ' + ex.message);\n                        }\n                    default:\n                        var message = 'Unexpected response from wikipedia api: ' + result.status;\n                        console.error(message, result);\n                        throw new Error(message);\n                }\n            })\n            .catch((err) => {\n                const message = 'Error getting image from wikipedia: ' + err.message;\n                console.error(message, err);\n                throw new Error('Error getting image from wikipedia: ' + err.message);\n            });\n    }\n}\n","import React from 'react';\nimport { Taxon } from '../redux/store';\nimport Wikipedia from '../../../Wikipedia';\n\nexport interface TaxonDescriptionProps {\n    taxon: Taxon;\n}\n\ninterface TaxonDescriptionState {}\n\nexport default class TaxonDescription extends React.Component<TaxonDescriptionProps, TaxonDescriptionState> {\n    renderTaxonDescription() {\n        return <Wikipedia term={this.props.taxon.name} />;\n    }\n\n    /**\n     * Intercept nodes which don't have a widely known biological association with\n     * the node name (\"scientific name\"), and for which a wikipedia lookup would not\n     * be very useful.\n     */\n    notBiological() {\n        switch (this.props.taxon.name) {\n            case 'root':\n                return (\n                    <div>\n                        <p>This taxon is the topmost node in the NCBI Taxonomy tree.</p>\n                    </div>\n                );\n            case 'cellular organisms':\n                return (\n                    <div>\n                        <p>This taxon represents all cellular organisms.</p>\n                    </div>\n                );\n            default:\n                return (\n                    <div>\n                        <p>Unknown non-biological taxon.</p>\n                    </div>\n                );\n        }\n    }\n\n    render() {\n        if (this.props.taxon.isBiological) {\n            return <div className=\"Col scrollable\">{this.renderTaxonDescription()}</div>;\n        }\n        return this.notBiological();\n    }\n}\n","import DB, { DBProps, DBStatus, DBStateNone, DBStateLoading, DBStateLoaded, DBStateError } from '../lib/DB';\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { TaxonomyModel, LinkedObject } from '../lib/model';\n\nexport type LinkedDataDBStateNone = DBStateNone;\nexport type LinkedDataDBStateLoading = DBStateLoading;\nexport type LinkedDataDBStateError = DBStateError;\n\nexport interface LinkedDataDBStateLoaded extends DBStateLoaded {\n    linkedObjects: Array<LinkedObject>;\n    page: number;\n    pageSize: number;\n}\n\nexport type LinkedDataDBState =\n    | LinkedDataDBStateNone\n    | LinkedDataDBStateLoading\n    | LinkedDataDBStateLoaded\n    | LinkedDataDBStateError;\n\nexport interface LinkedDataDBProps extends DBProps<LinkedDataDBState> {\n    token: string;\n    config: AppConfig;\n}\n\nexport default class LinkedDataDB extends DB<LinkedDataDBState> {\n    token: string;\n    serviceWizardURL: string;\n    constructor(props: LinkedDataDBProps) {\n        super(props);\n        this.token = props.token;\n        this.serviceWizardURL = props.config.services.ServiceWizard.url;\n    }\n\n    async fetchLinkedObjects({ taxonID, page, pageSize }: { taxonID: string; page: number; pageSize: number }) {\n        try {\n            this.set((state: LinkedDataDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADING\n                };\n            });\n\n            const client = new TaxonomyModel({\n                token: this.token,\n                url: this.serviceWizardURL\n            });\n\n            const offset = (page - 1) * pageSize;\n            const limit = pageSize;\n\n            const linkedObjects = await client.getLinkedObjects(taxonID, {\n                offset,\n                limit\n            });\n            this.set((state: LinkedDataDBState) => {\n                return {\n                    ...state,\n                    status: DBStatus.LOADED,\n                    linkedObjects,\n                    page,\n                    pageSize\n                };\n            });\n        } catch (ex) {\n            console.error('ERROR', ex);\n            this.set((state: LinkedDataDBState) => {\n                return {\n                    status: DBStatus.ERROR,\n                    message: ex.message\n                };\n            });\n        }\n    }\n}\n","import React from 'react';\nimport { LinkedObject } from '../lib/model';\n\nexport interface Props {\n    linkedObjects: Array<LinkedObject>;\n}\n\ninterface State {}\n\nexport default class LinkedData extends React.Component<Props, State> {\n    render() {\n        return <div>Coming soon...</div>;\n    }\n}\n","import React from 'react';\nimport LinkedDataDB, { LinkedDataDBStateError, LinkedDataDBStateLoaded } from './LinkedDataDB';\nimport { DBStatus } from '../lib/DB';\n\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport LinkedData from './LinkedData';\nimport { TaxonID } from '../redux/store';\nimport { Icon, Alert } from 'antd';\n\nexport interface Props {\n    token: string;\n    config: AppConfig;\n    taxonID: TaxonID;\n}\n\ninterface State {}\n\nexport default class Data extends React.Component<Props, State> {\n    db: LinkedDataDB;\n    constructor(props: Props) {\n        super(props);\n        this.db = new LinkedDataDB({\n            onUpdate: () => {\n                this.forceUpdate();\n            },\n            initialData: {\n                status: DBStatus.NONE\n            },\n            token: props.token,\n            config: props.config\n        });\n    }\n\n    fetchLinkedData(taxonID: TaxonID, page: number, pageSize: number) {\n        return this.db.fetchLinkedObjects({ taxonID, page, pageSize });\n    }\n\n    renderNone() {\n        return <Icon type=\"loading\" />;\n    }\n\n    renderLoading() {\n        return <Icon type=\"loading\" />;\n    }\n\n    renderError(db: LinkedDataDBStateError) {\n        return <Alert type=\"error\" message={db.message} />;\n    }\n\n    renderLoaded(db: LinkedDataDBStateLoaded) {\n        return <LinkedData linkedObjects={db.linkedObjects} />;\n    }\n\n    render() {\n        const db = this.db.get();\n        switch (db.status) {\n            case DBStatus.NONE:\n                this.db.fetchLinkedObjects({ taxonID: this.props.taxonID, page: 1, pageSize: 1000 });\n                return this.renderNone();\n            case DBStatus.LOADING:\n                return this.renderLoading();\n            case DBStatus.ERROR:\n                return this.renderError(db);\n            case DBStatus.LOADED:\n                return this.renderLoaded(db);\n        }\n    }\n}\n","import { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { StoreState } from '../../../../redux/store';\nimport DataComponent from './data';\nimport { connect } from 'react-redux';\n\nexport interface OwnProps {}\n\nexport interface StateProps {\n    token: string;\n    config: AppConfig;\n}\n\nexport interface DispatchProps {}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        app: { config }\n    } = state;\n    if (!userAuthorization) {\n        throw new Error('Invalid state - no user authorization');\n    }\n    return {\n        token: userAuthorization.token,\n        config\n    };\n}\n\nfunction mapDispatchToProps() {\n    return {};\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(DataComponent);\n","import React from 'react';\nimport { Tabs } from 'antd';\nimport TaxonDetail from './TaxonDetail';\nimport TaxonDescription from './TaxonDescription';\nimport LinkedData from '../linkedData';\nimport { Taxon } from '../redux/store';\n\nexport interface TaxonInfoProps {\n    taxon: Taxon;\n}\n\ninterface TaxonInfoState {}\n\nexport default class TaxonInfo extends React.Component<TaxonInfoProps, TaxonInfoState> {\n    render() {\n        return (\n            <Tabs defaultActiveKey=\"detail\" animated={false} className=\"FullHeight-tabs\">\n                <Tabs.TabPane tab=\"Detail\" key=\"detail\" forceRender={false}>\n                    <TaxonDetail taxon={this.props.taxon} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Description\" key=\"description\" forceRender={false}>\n                    <TaxonDescription taxon={this.props.taxon} />\n                </Tabs.TabPane>\n                <Tabs.TabPane tab=\"Linked Data\" key=\"linkedData\" forceRender={false}>\n                    <LinkedData taxonID={this.props.taxon.id} />\n                </Tabs.TabPane>\n            </Tabs>\n        );\n    }\n}\n","import React from 'react';\n\nimport { SourceInfo } from '../SourceInfo';\nimport LineageNavigator from '../LineageNavigator';\nimport TaxonSummary from '../TaxonSummary';\nimport { Taxon, TaxonID } from '../redux/store';\nimport { Row, Col } from 'antd';\nimport TaxonInfo from '../taxonInfo/TaxonInfo';\nimport './Taxonomy.css';\n\nexport interface TaxonomyProps {\n    // lineage: Array<Taxon>;\n    selectedTaxon: Taxon;\n    targetTaxon: Taxon;\n    selectTaxonID: (taxonID: TaxonID) => void;\n    navigateToTaxonID: (taxonID: TaxonID) => void;\n    setTitle: (title: string) => void;\n}\n\ninterface TaxonomyState {}\n\nexport default class Taxonomy extends React.Component<TaxonomyProps, TaxonomyState> {\n    renderTaxonInfo() {\n        if (!this.props.selectedTaxon) {\n            return <div>No taxon selected</div>;\n        }\n        return <TaxonInfo taxon={this.props.selectedTaxon} />;\n        // return 'disabled';\n    }\n\n    componentDidMount() {\n        this.props.setTitle('Taxonomy Landing Page for \"' + this.props.targetTaxon.name + '\"');\n    }\n\n    render() {\n        return (\n            <div className=\"Col scrollable Taxonomy\">\n                <div className=\"Col-auto Taxonomy-summary-section\">\n                    <Row>\n                        <Col span={12}>\n                            <TaxonSummary taxon={this.props.targetTaxon} />\n                        </Col>\n                        <Col span={12}>\n                            <SourceInfo />\n                        </Col>\n                    </Row>\n                </div>\n                <div className=\"Row scrollable\">\n                    <div className=\"Col scrollable\" style={{ flex: '0 0 20em' }}>\n                        <LineageNavigator\n                            selectedTaxon={this.props.selectedTaxon}\n                            // lineage={this.props.lineage}\n                            selectTaxonID={this.props.selectTaxonID}\n                            targetTaxon={this.props.targetTaxon}\n                            navigateToTaxonID={this.props.navigateToTaxonID}\n                        />\n                    </div>\n\n                    <div className=\"Col scrollable\" style={{ marginLeft: '10px' }}>\n                        {this.renderTaxonInfo()}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import React from 'react';\nimport TaxonDB, { TaxonDBStateLoaded } from './TaxonDB';\nimport { DBStatus, DBStateError } from '../lib/DB';\n\nimport { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport Taxonomy from './Taxonomy';\nimport { TaxonID } from '../redux/store';\nimport { Icon, Alert } from 'antd';\n\nexport interface Props {\n    token: string;\n    config: AppConfig;\n    taxonID: TaxonID;\n    navigate: (taxonID: TaxonID) => void;\n    setTitle: (title: string) => void;\n}\n\ninterface State {}\n\nexport default class Data extends React.Component<Props, State> {\n    db: TaxonDB;\n    constructor(props: Props) {\n        super(props);\n        this.db = new TaxonDB({\n            onUpdate: () => {\n                this.forceUpdate();\n            },\n            initialData: {\n                status: DBStatus.NONE\n            },\n            token: props.token,\n            config: props.config\n        });\n    }\n\n    selectTaxon(taxonID: TaxonID) {\n        return this.db.getSelectedTaxon(taxonID);\n    }\n\n    navigateToTaxon(taxonID: TaxonID) {\n        return this.props.navigate(taxonID);\n    }\n\n    renderLoading() {\n        return <Icon type=\"loading\" />;\n    }\n\n    renderError(db: DBStateError) {\n        return <Alert type=\"error\" message={db.message} />;\n    }\n\n    renderLoaded(db: TaxonDBStateLoaded) {\n        return (\n            <Taxonomy\n                targetTaxon={db.targetTaxon}\n                selectedTaxon={db.selectedTaxon}\n                selectTaxonID={this.selectTaxon.bind(this)}\n                navigateToTaxonID={this.navigateToTaxon.bind(this)}\n                setTitle={this.props.setTitle}\n            />\n        );\n    }\n\n    render() {\n        const db = this.db.get();\n        switch (db.status) {\n            case DBStatus.NONE:\n                this.db.getTargetTaxon(this.props.taxonID);\n                return this.renderLoading();\n            case DBStatus.LOADING:\n                return this.renderLoading();\n            case DBStatus.ERROR:\n                return this.renderError(db);\n            case DBStatus.LOADED:\n                if (this.props.taxonID !== db.targetTaxon.id) {\n                    this.db.getTargetTaxon(this.props.taxonID);\n                    return this.renderLoaded(db);\n                } else {\n                    return this.renderLoaded(db);\n                }\n        }\n    }\n}\n","import { AppConfig } from '@kbase/ui-lib/lib/redux/integration/store';\nimport { StoreState, RelationEngineID } from '../../../../redux/store';\nimport DataComponent from './data';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'react';\nimport { Action } from 'redux';\nimport { navigate } from '../../../../redux/actions';\nimport { sendTitle } from '@kbase/ui-lib';\n\nexport interface OwnProps {}\n\nexport interface StateProps {\n    token: string;\n    config: AppConfig;\n}\n\nexport interface DispatchProps {\n    navigate: (id: RelationEngineID) => void;\n    setTitle: (title: string) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        app: { config }\n    } = state;\n    if (!userAuthorization) {\n        throw new Error('Invalid state - no user authorization');\n    }\n    return {\n        token: userAuthorization.token,\n        config\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, props: OwnProps): DispatchProps {\n    return {\n        navigate: (id: RelationEngineID) => {\n            dispatch(navigate(id) as any);\n        },\n        setTitle: (title: string) => {\n            dispatch(sendTitle(title) as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(DataComponent);\n","import { RelationEngineID, StoreState } from '../../../redux/store';\n// import { TaxonID } from './redux/store';\nimport { Dispatch } from 'react';\nimport { Action } from 'redux';\nimport { navigate } from '../../../redux/actions';\nimport { connect } from 'react-redux';\nimport Taxonomy from './main';\nimport { sendTitle } from '@kbase/ui-lib';\n\nexport interface OwnProps {\n    // taxonID: TaxonID;\n}\n\nexport interface StateProps {\n    // taxonID: TaxonID;\n}\n\nexport interface DispatchProps {\n    navigate: (relationEngineID: RelationEngineID) => void;\n    setTitle: (title: string) => void;\n    // load: (taxonID: TaxonID) => void;\n}\n\nfunction mapStateToProps(state: StoreState, ownProps: OwnProps): StateProps {\n    return {};\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        navigate: (relationEngineId: RelationEngineID) => {\n            dispatch(navigate(relationEngineId) as any);\n        },\n        setTitle: (title: string) => {\n            dispatch(sendTitle(title) as any);\n        }\n        // load: (taxonID: TaxonID) => {\n        //     dispatch(load(taxonID) as any);\n        // }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Taxonomy);\n","import React from 'react';\nimport { RootState } from '@kbase/ui-lib/lib/redux/root/store';\nimport {\n    RelationEngineViewLoading,\n    RelationEngineViewLoaded,\n    RelationEngineViewError,\n    RelationEngineID,\n    RelationEngineNodeType,\n    Navigation,\n    ViewType,\n    NavigationSome\n} from '../../redux/store';\nimport Loading from '../Loading';\nimport { Alert } from 'antd';\nimport Taxonomy from '../landingPages/taxonomy';\n\nexport interface DispatcherProps {\n    token: string | null;\n    rootState: RootState;\n    // view: RelationEngineView;\n    navigation: Navigation;\n    trigger: number;\n    navigate: (relationEngineID: RelationEngineID) => void;\n}\n\ninterface DispatcherState {}\n\nexport class Dispatcher extends React.Component<DispatcherProps, DispatcherState> {\n    renderUnauthorized() {\n        return <div>Sorry, not authorized. Please log in first.</div>;\n    }\n\n    renderRootState() {\n        switch (this.props.rootState) {\n            case RootState.NONE:\n                return '';\n            case RootState.HOSTED:\n                return '';\n            case RootState.DEVELOP:\n                return 'develop';\n            case RootState.ERROR:\n                return 'error';\n        }\n    }\n\n    renderNavigationNone() {\n        return <div>none</div>;\n    }\n\n    renderNavigationLoading(view: RelationEngineViewLoading) {\n        return <Loading message=\"Loading view...\" />;\n    }\n\n    renderNavigationLoaded(view: RelationEngineViewLoaded) {\n        // This is currently how we dispatch to the type-specific\n        // landing page.\n        switch (view.relationEngineNodeType) {\n            case RelationEngineNodeType.TAXON:\n                return <Taxonomy taxonID={view.relationEngineID} />;\n        }\n    }\n\n    renderNavigationError(view: RelationEngineViewError) {\n        return <Alert type=\"error\" message={`View Error: ${view.message}`} />;\n    }\n\n    renderNavigationSome(navigation: NavigationSome) {\n        // This is currently how we dispatch to the type-specific\n        // landing page.\n        switch (navigation.type) {\n            case ViewType.TAXONOMY:\n                return <Taxonomy taxonID={navigation.relationEngineID} />;\n        }\n    }\n\n    renderNavigation() {\n        switch (this.props.navigation.type) {\n            case ViewType.NONE:\n                return this.renderNavigationNone();\n            default:\n                return this.renderNavigationSome(this.props.navigation);\n            // case ViewStatus.LOADING:\n            //     return this.renderNavigationLoading(this.props.view);\n            // case ViewStatus.LOADED:\n            //     return this.renderNavigationLoaded(this.props.view);\n            // case ViewStatus.ERROR:\n            //     return this.renderNavigationError(this.props.view);\n        }\n    }\n\n    parseHash(hash: string): { path: Array<string>; params: { relationEngineID: string } } {\n        const hashRe = /^#(.*?)\\/(.*)$/;\n        const m = hashRe.exec(hash);\n\n        if (!m) {\n            throw new Error('Invalid path');\n        }\n\n        // Just for now...\n        // TODO: for real\n\n        const [, path, relationEngineID] = m;\n\n        return {\n            path: [path],\n            params: { relationEngineID }\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.rootState === RootState.DEVELOP) {\n            window.addEventListener('hashchange', (ev: HashChangeEvent) => {\n                const url = new URL(ev.newURL);\n                const hash = url.hash;\n                if (!hash) {\n                    throw new Error('no hash!');\n                }\n                const {\n                    params: { relationEngineID }\n                } = this.parseHash(hash);\n                this.props.navigate(relationEngineID);\n                // console.log('hash?', hash);\n            });\n            const hash = window.location.hash;\n            // console.log('hash?', hash);\n            if (hash) {\n                const {\n                    params: { relationEngineID }\n                } = this.parseHash(hash);\n                // console.log('nav to ', relationEngineID);\n                this.props.navigate(relationEngineID);\n            } else {\n                // TODO: remove?\n                this.props.navigate('ncbi_taxon:562');\n            }\n        }\n    }\n\n    render() {\n        if (!this.props.token) {\n            return this.renderUnauthorized();\n        }\n        return (\n            <div className=\"Col scrollable\">\n                <div className=\"Row-auto\">{this.renderRootState()}</div>\n                <div className=\"Row  scrollable\">{this.renderNavigation()}</div>\n            </div>\n        );\n    }\n}\n","import { StoreState, RelationEngineID, Navigation } from '../../redux/store';\nimport { Dispatch } from 'react';\nimport { Action } from 'redux';\nimport { connect } from 'react-redux';\nimport { Dispatcher } from './Dispatcher';\nimport { RootState } from '@kbase/ui-lib/lib/redux/root/store';\nimport { navigate } from '../../redux/actions';\n\ninterface OwnProps {}\n\ninterface StateProps {\n    token: string | null;\n    rootState: RootState;\n    // view: RelationEngineView;\n    // viewState: ViewStatus;\n    navigation: Navigation;\n    trigger: number;\n}\n\ninterface DispatchProps {\n    navigate: (relationEngineID: RelationEngineID) => void;\n}\n\nfunction mapStateToProps(state: StoreState, props: OwnProps): StateProps {\n    const {\n        auth: { userAuthorization },\n        root: { state: rootState },\n        navigation,\n        trigger\n    } = state;\n\n    // Auth integration.\n    let token;\n    if (!userAuthorization) {\n        token = null;\n    } else {\n        token = userAuthorization.token;\n    }\n\n    return { token, rootState, navigation, trigger };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<Action>, ownProps: OwnProps): DispatchProps {\n    return {\n        navigate: (relationEngineID: RelationEngineID) => {\n            dispatch(navigate(relationEngineID) as any);\n        }\n    };\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, StoreState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Dispatcher);\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { createReduxStore } from './redux/store';\nimport { AppBase } from '@kbase/ui-lib';\nimport './App.css';\nimport Dispatcher from './components/dispatcher';\nimport { Unsubscribe } from 'redux';\nimport { navigate } from './redux/actions';\n\nconst store = createReduxStore();\n\ninterface AppProps {}\n\ninterface AppState {}\n\nexport default class App<AppProps, AppState> extends React.Component {\n    storeSubscription: Unsubscribe | null;\n    constructor(props: AppProps) {\n        super(props);\n        this.storeSubscription = null;\n    }\n    componentDidMount() {\n        let last: {\n            view: string | null;\n            params: { [key: string]: string };\n        } = {\n            view: null,\n            params: {}\n        };\n        this.storeSubscription = store.subscribe(() => {\n            const state = store.getState();\n            if (!state) {\n                return;\n            }\n            const {\n                app: {\n                    runtime: { navigation }\n                }\n            } = state;\n\n            const view = navigation.view;\n            const params = navigation.params as { [key: string]: string };\n\n            // console.log('store changed', navigation);\n\n            if (\n                view !== last.view ||\n                last.params === null ||\n                Object.keys(params).some((key) => {\n                    return params[key] !== last.params[key];\n                })\n            ) {\n                last.params = params;\n                last.view = view;\n                // console.log('yahoo', view, params);\n                // TODO: store may change but there is not navigation yet.\n                if (params['relationEngineID']) {\n                    store.dispatch(navigate(params['relationEngineID']) as any);\n                }\n            }\n        });\n    }\n    render() {\n        return (\n            <Provider store={store}>\n                <AppBase>\n                    <div className=\"App Col scrollable\">\n                        <Dispatcher />\n                    </div>\n                </AppBase>\n            </Provider>\n        );\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}